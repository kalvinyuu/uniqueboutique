(undo-tree-save-format-version . 1)
"95c993074f9ce5109d742740fcaaaa8fa732edd2"
[nil nil nil nil (26736 12953 503036 0) 0 nil]
([nil nil ((4911 . 4912) (t 26736 11723 66464 343000)) nil (26736 13426 506728 0) 0 nil] [nil nil ((#("type GetSignedURLParams = {
    fileType: string
    fileSize: number
    checksum: string
    name: string
    type: string
    productId?: number | null
}
export const getSignedURL = async ({
  fileType,
  fileSize,
  checksum,
  name,
  type,
  width,
  height,
  productId,
}: GetSignedURLParams & { width: number; height: number }): SignedURLResponse => {
  if (!allowedFileTypes.includes(fileType)) {
    return { failure: 'File type not allowed' };
  }

  if (fileSize > maxFileSize) {
    return { failure: 'File size too large' };
  }

  const fileName = generateFileName();

  const putObjectCommand = new PutObjectCommand({
    Bucket: process.env.AWS_BUCKET_NAME!,
    Key: fileName,
    ContentType: fileType,
    ContentLength: fileSize,
    ChecksumSHA256: checksum,
  });

    const url = await getSignedUrl(s3Client, putObjectCommand, { expiresIn: 60 });
    
    const results = await db
	.insert(images).values({
    url: url.split('?')[0],
    width,
    height,
    name,
    type,
    productId: productId || null,
	}).returning()

    if (!results) {
    return { failure: 'Failed to save image details in the database' };
  }
    
    return { success: { url, id: results[0].id } };
};
" 0 4 (face font-lock-keyword-face fontified t) 4 5 (fontified t) 5 23 (face font-lock-type-face fontified t) 23 26 (fontified t) 26 42 (font-lock-multiline t fontified t) 42 48 (font-lock-multiline t face typescript-primitive-face fontified t) 48 63 (font-lock-multiline t fontified t) 63 69 (font-lock-multiline t face typescript-primitive-face fontified t) 69 84 (font-lock-multiline t fontified t) 84 90 (font-lock-multiline t face typescript-primitive-face fontified t) 90 101 (font-lock-multiline t fontified t) 101 107 (font-lock-multiline t face typescript-primitive-face fontified t) 107 112 (font-lock-multiline t fontified t) 112 116 (font-lock-multiline t face default fontified t) 116 118 (font-lock-multiline t fontified t) 118 124 (font-lock-multiline t face typescript-primitive-face fontified t) 124 141 (font-lock-multiline t fontified t) 141 147 (font-lock-multiline t face typescript-primitive-face fontified t) 147 150 (font-lock-multiline t fontified t) 150 154 (font-lock-multiline t face font-lock-constant-face fontified t) 154 156 (font-lock-multiline t fontified t) 156 157 (fontified t) 157 163 (face font-lock-keyword-face fontified t) 163 164 (fontified t) 164 169 (face font-lock-keyword-face fontified t) 169 170 (fontified t) 170 182 (face font-lock-variable-name-face fontified t) 182 185 (fontified t) 185 190 (face font-lock-keyword-face fontified t) 190 191 (fontified t) 191 192 (font-lock-multiline t fontified t) 192 196 (font-lock-multiline t fontified t) 196 204 (face font-lock-variable-name-face font-lock-multiline t fontified t) 204 208 (font-lock-multiline t fontified t) 208 216 (face font-lock-variable-name-face font-lock-multiline t fontified t) 216 220 (font-lock-multiline t fontified t) 220 228 (face font-lock-variable-name-face font-lock-multiline t fontified t) 228 232 (font-lock-multiline t fontified t) 232 236 (face font-lock-variable-name-face font-lock-multiline t fontified t) 236 240 (font-lock-multiline t fontified t) 240 244 (font-lock-multiline t face font-lock-variable-name-face fontified t) 244 248 (font-lock-multiline t fontified t) 248 253 (face font-lock-variable-name-face font-lock-multiline t fontified t) 253 257 (font-lock-multiline t fontified t) 257 263 (face font-lock-variable-name-face font-lock-multiline t fontified t) 263 267 (font-lock-multiline t fontified t) 267 276 (face font-lock-variable-name-face font-lock-multiline t fontified t) 276 279 (font-lock-multiline t fontified t) 279 281 (font-lock-multiline t fontified t) 281 299 (font-lock-multiline t face font-lock-type-face fontified t) 299 304 (font-lock-multiline t fontified t) 304 309 (face font-lock-variable-name-face font-lock-multiline t fontified t) 309 311 (font-lock-multiline t fontified t) 311 317 (font-lock-multiline t face typescript-primitive-face fontified t) 317 327 (font-lock-multiline t fontified t) 327 333 (font-lock-multiline t face typescript-primitive-face fontified t) 333 336 (font-lock-multiline t fontified t) 336 338 (fontified t) 338 355 (face font-lock-type-face fontified t) 355 356 (fontified t) 356 358 (face font-lock-keyword-face fontified t) 358 359 (fontified t) 359 363 (font-lock-multiline t fontified t) 363 365 (font-lock-multiline t face font-lock-keyword-face fontified t) 365 385 (font-lock-multiline t fontified t) 385 393 (face font-lock-function-call-face font-lock-multiline t fontified t) 393 411 (font-lock-multiline t fontified t) 411 417 (font-lock-multiline t face font-lock-keyword-face fontified t) 417 429 (font-lock-multiline t fontified t) 429 452 (font-lock-multiline t face font-lock-string-face fontified t) 452 463 (font-lock-multiline t fontified t) 463 465 (font-lock-multiline t face font-lock-keyword-face fontified t) 465 497 (font-lock-multiline t fontified t) 497 503 (font-lock-multiline t face font-lock-keyword-face fontified t) 503 515 (font-lock-multiline t fontified t) 515 536 (font-lock-multiline t face font-lock-string-face fontified t) 536 547 (font-lock-multiline t fontified t) 547 552 (font-lock-multiline t face font-lock-keyword-face fontified t) 552 553 (font-lock-multiline t fontified t) 553 561 (face font-lock-variable-name-face font-lock-multiline t fontified t) 561 564 (font-lock-multiline t fontified t) 564 580 (face font-lock-function-call-face font-lock-multiline t fontified t) 580 587 (font-lock-multiline t fontified t) 587 592 (font-lock-multiline t face font-lock-keyword-face fontified t) 592 593 (font-lock-multiline t fontified t) 593 609 (face font-lock-variable-name-face font-lock-multiline t fontified t) 609 612 (font-lock-multiline t fontified t) 612 615 (font-lock-multiline t face font-lock-keyword-face fontified t) 615 616 (font-lock-multiline t fontified t) 616 632 (face font-lock-type-face font-lock-multiline t fontified t) 632 793 (font-lock-multiline t fontified t) 793 798 (font-lock-multiline t face font-lock-keyword-face fontified t) 798 799 (font-lock-multiline t fontified t) 799 802 (face font-lock-variable-name-face font-lock-multiline t fontified t) 802 805 (font-lock-multiline t fontified t) 805 810 (font-lock-multiline t face font-lock-keyword-face fontified t) 810 811 (font-lock-multiline t fontified t) 811 823 (face font-lock-function-call-face font-lock-multiline t fontified t) 823 872 (font-lock-multiline t fontified t) 872 881 (font-lock-multiline t fontified t) 881 886 (font-lock-multiline t face font-lock-keyword-face fontified t) 886 887 (font-lock-multiline t fontified t) 887 894 (face font-lock-variable-name-face font-lock-multiline t fontified t) 894 897 (font-lock-multiline t fontified t) 897 902 (font-lock-multiline t face font-lock-keyword-face fontified t) 902 908 (font-lock-multiline t fontified t) 908 914 (face font-lock-function-call-face font-lock-multiline t fontified t) 914 923 (font-lock-multiline t fontified t) 923 929 (face font-lock-function-call-face font-lock-multiline t fontified t) 929 945 (font-lock-multiline t fontified t) 945 950 (face font-lock-function-call-face font-lock-multiline t fontified t) 950 951 (font-lock-multiline t fontified t) 951 954 (font-lock-multiline t face font-lock-string-face fontified t) 954 955 (font-lock-multiline t fontified t) 955 997 (font-lock-multiline t fontified t) 997 1001 (font-lock-multiline t face font-lock-keyword-face fontified t) 1001 1031 (font-lock-multiline t fontified t) 1031 1035 (font-lock-multiline t face font-lock-constant-face fontified t) 1035 1041 (font-lock-multiline t fontified t) 1041 1050 (face font-lock-function-call-face font-lock-multiline t fontified t) 1050 1058 (font-lock-multiline t fontified t) 1058 1060 (font-lock-multiline t face font-lock-keyword-face fontified t) 1060 1078 (font-lock-multiline t fontified t) 1078 1084 (font-lock-multiline t face font-lock-keyword-face fontified t) 1084 1096 (font-lock-multiline t fontified t) 1096 1142 (font-lock-multiline t face font-lock-string-face fontified t) 1142 1156 (font-lock-multiline t fontified t) 1156 1159 (fontified t font-lock-multiline t) 1159 1165 (fontified t font-lock-multiline t face font-lock-keyword-face) 1165 1208 (fontified t font-lock-multiline t) 1208 1210 (fontified t)) . -3701) (undo-tree-id88 . -70) (undo-tree-id89 . -264) (undo-tree-id90 . -264) (undo-tree-id91 . -264) (undo-tree-id92 . -70) (undo-tree-id93 . -70) (undo-tree-id94 . -264) (undo-tree-id95 . -264) (undo-tree-id96 . -1210) (undo-tree-id97 . -906) (undo-tree-id98 . -264) 4911 (t 26736 11723 66464 343000)) ((3701 . 4911)) (26736 12952 727743 0) 0 nil] [nil nil ((#("\"use server\"
import { z } from 'zod'
import { stripe } from '@/lib/stripe'
import { checkRole } from \"@/../utils/roles\";
import { clerkClient } from \"@clerk/nextjs/server\";
import { productCatalouge, images, orders, users } from '@/db/schema'; 
import { db }  from \"@/db/index\";
import { eq } from 'drizzle-orm';
import { S3Client, PutObjectCommand,   } from \"@aws-sdk/client-s3\"
import { getSignedUrl } from \"@aws-sdk/s3-request-presigner\"
import crypto from \"crypto\"
import { Orders, Product} from \"@/app/types\"
import { format, Order } from \"@/app/zod\"
import { cache } from 'react'

export async function authManage(email:string|null=null, name:string|null=null, authId:string ) {
	await db.insert(users).values({
	    email: email,
	    authId: authId,
	    authName: name
	})
}

export const getAllProducts = cache(async (): Promise<Product[]> => {
    try {
        const results: Product[] = await db.select().from(productCatalouge)
        return results
    } catch (error) {
        console.error('Error fetching products:', error)
        throw new Error('Failed to fetch data')
    }
})


export async function orderStatus(orderID: number) {
    const order = await db.select().from(orders).where(eq(orders.id, orderID))
	const parsedOrder = Order.parse(order)
	return parsedOrder.orderStatus
}

export async function updateOrderStatus(orderID: number) {
    const order = await db.query.orders.findFirst({
	where: eq(orders.id, orderID)
    })
    	const parsedOrder = Order.parse(order)
    if (parsedOrder.orderStatus == \"Your order has been shipped.\" ) {
	await db.update(orders).set({orderStatus: \"Your order has been received.\" })
	    .where(eq(orders.id, orderID))
    }
    else {
	await db.update(orders).set({orderStatus: \"Your order has been shipped.\" })
	    .where(eq(orders.id, orderID))
    }
}

export async function setRole(formData: FormData) {
    const client = await clerkClient()
    if (!checkRole(\"admin\")) {
	return { message: \"Not Authorized\" };
    }  
 try {
    const res = await client.users.updateUser(formData.get('id') as string, {
      publicMetadata: { role: formData.get('role') },
    })
    return { message: res.publicMetadata }
  } catch (err) {
    return { message: err }
  }
}

export async function createProduct(formData: FormData) {
    const info = format.parse({
        name: formData.get('name'),
        price: formData.get(\"price\"),
        imageLocation: formData.get('imageLocation'),
        category: formData.get('category'),
    });
    try {
        await db.insert(productCatalouge).values({
            name: info.name,
            imageLocation: info.imageLocation ,
            price: info.price,
            category: info.category ,
        });
        await stripe.products.create({
            name: info.name,
        });
        await stripe.prices.create({
            currency: 'gpp',
            unit_amount: Math.round(info.price * 100),
            product_data: {
                name: info.name,
            },
        });
        console.log('Product created successfully!');
    } catch (error) {
        console.error('Error creating product:', error);
    }
}


const s3Client = new S3Client({
    region: process.env.AWS_REGION!,
    credentials: {
i	accessKeyId: process.env.AWS_ACCESS_KEY_ID!,
	secretAccessKey: process.env.AWS_SECRET_ACCESS_KEY!,
    },
})

const allowedFileTypes = [
    \"image/jpeg\",
    \"image/png\",
]

const maxFileSize = 1048576 * 10 // 1 MB

const generateFileName = (bytes = 32) => crypto.randomBytes(bytes).toString(\"hex\")

type SignedURLResponse = Promise<
    | { failure?: undefined; success: { url: string; id: number } }
    | { failure: string; success?: undefined }
>

type GetSignedURLParams = {
    fileType: string
    fileSize: number
    checksum: string
    name: string
    type: string
    productId?: number | null
}
export const getSignedURL = async ({
  fileType,
  fileSize,
  checksum,
  name,
  type,
  width,
  height,
  productId,
}: GetSignedURLParams & { width: number; height: number }): SignedURLResponse => {
  if (!allowedFileTypes.includes(fileType)) {
    return { failure: 'File type not allowed' };
  }

  if (fileSize > maxFileSize) {
    return { failure: 'File size too large' };
  }

  const fileName = generateFileName();

  const putObjectCommand = new PutObjectCommand({
    Bucket: process.env.AWS_BUCKET_NAME!,
    Key: fileName,
    ContentType: fileType,
    ContentLength: fileSize,
    ChecksumSHA256: checksum,
  });

    const url = await getSignedUrl(s3Client, putObjectCommand, { expiresIn: 60 });
    
    const results = await db
	.insert(images).values({
    url: url.split('?')[0],
    width,
    height,
    name,
    type,
    productId: productId || null,
	}).returning()

    if (!results) {
    return { failure: 'Failed to save image details in the database' };
  }
    
    return { success: { url, id: results[0].id } };
};
" 0 12 (face font-lock-string-face fontified t) 12 13 (fontified t) 13 19 (face font-lock-keyword-face fontified t) 19 26 (fontified t) 26 30 (face font-lock-keyword-face fontified t) 30 31 (fontified t) 31 36 (face font-lock-string-face fontified t) 36 37 (fontified t) 37 43 (face font-lock-keyword-face fontified t) 43 55 (fontified t) 55 59 (face font-lock-keyword-face fontified t) 59 60 (fontified t) 60 74 (face font-lock-string-face fontified t) 74 75 (fontified t) 75 81 (face font-lock-keyword-face fontified t) 81 96 (fontified t) 96 100 (face font-lock-keyword-face fontified t) 100 101 (fontified t) 101 119 (face font-lock-string-face fontified t) 119 121 (fontified t) 121 127 (face font-lock-keyword-face fontified t) 127 144 (fontified t) 144 148 (face font-lock-keyword-face fontified t) 148 149 (fontified t) 149 171 (face font-lock-string-face fontified t) 171 173 (fontified t) 173 179 (face font-lock-keyword-face fontified t) 179 224 (fontified t) 224 228 (face font-lock-keyword-face fontified t) 228 229 (fontified t) 229 242 (face font-lock-string-face fontified t) 242 245 (fontified t) 245 251 (face font-lock-keyword-face fontified t) 251 260 (fontified t) 260 264 (face font-lock-keyword-face fontified t) 264 265 (fontified t) 265 277 (face font-lock-string-face fontified t) 277 279 (fontified t) 279 285 (face font-lock-keyword-face fontified t) 285 293 (fontified t) 293 297 (face font-lock-keyword-face fontified t) 297 298 (fontified t) 298 311 (face font-lock-string-face fontified t) 311 313 (fontified t) 313 319 (face font-lock-keyword-face fontified t) 319 354 (fontified t) 354 358 (face font-lock-keyword-face fontified t) 358 359 (fontified t) 359 379 (face font-lock-string-face fontified t) 379 380 (fontified t) 380 386 (face font-lock-keyword-face fontified t) 386 404 (fontified t) 404 408 (face font-lock-keyword-face fontified t) 408 409 (fontified t) 409 440 (face font-lock-string-face fontified t) 440 441 (fontified t) 441 447 (face font-lock-keyword-face fontified t) 447 455 (fontified t) 455 459 (face font-lock-keyword-face fontified t) 459 460 (fontified t) 460 468 (face font-lock-string-face fontified t) 468 469 (fontified t) 469 475 (face font-lock-keyword-face fontified t) 475 495 (fontified t) 495 499 (face font-lock-keyword-face fontified t) 499 500 (fontified t) 500 513 (face font-lock-string-face fontified t) 513 514 (fontified t) 514 520 (face font-lock-keyword-face fontified t) 520 539 (fontified t) 539 543 (face font-lock-keyword-face fontified t) 543 544 (fontified t) 544 555 (face font-lock-string-face fontified t) 555 556 (fontified t) 556 562 (face font-lock-keyword-face fontified t) 562 573 (fontified t) 573 577 (face font-lock-keyword-face fontified t) 577 578 (fontified t) 578 585 (face font-lock-string-face fontified t) 585 587 (fontified t) 587 593 (face font-lock-keyword-face fontified t) 593 594 (fontified t) 594 599 (face font-lock-keyword-face fontified t) 599 600 (fontified t) 600 608 (face font-lock-keyword-face fontified t) 608 609 (fontified t) 609 619 (face font-lock-function-name-face fontified t) 619 620 (fontified t) 620 625 (face font-lock-variable-name-face fontified t) 625 626 (fontified t) 626 632 (face typescript-primitive-face fontified t) 632 633 (fontified t) 633 637 (face font-lock-constant-face fontified t) 637 638 (fontified t) 638 642 (face font-lock-constant-face fontified t) 642 644 (fontified t) 644 648 (face font-lock-variable-name-face fontified t) 648 649 (fontified t) 649 655 (face typescript-primitive-face fontified t) 655 656 (fontified t) 656 660 (face font-lock-constant-face fontified t) 660 661 (fontified t) 661 665 (face font-lock-constant-face fontified t) 665 667 (fontified t) 667 673 (face font-lock-variable-name-face fontified t) 673 674 (fontified t) 674 680 (face typescript-primitive-face fontified t) 680 683 (fontified t) 683 684 (typescript--pstate ((nil 0 function 601 ("authManage") nil) (nil -2305843009213693952 toplevel nil nil nil)) font-lock-multiline t fontified t) 684 686 (font-lock-multiline t fontified t) 686 691 (font-lock-multiline t face font-lock-keyword-face fontified t) 691 695 (font-lock-multiline t fontified t) 695 701 (face font-lock-function-call-face font-lock-multiline t fontified t) 701 709 (font-lock-multiline t fontified t) 709 715 (face font-lock-function-call-face font-lock-multiline t fontified t) 715 782 (font-lock-multiline t fontified t) 782 783 (typescript--pend (nil 0 function 601 ("authManage") nil) font-lock-multiline t fontified t) 783 785 (fontified t) 785 791 (face font-lock-keyword-face fontified t) 791 792 (fontified t) 792 797 (face font-lock-keyword-face fontified t) 797 798 (fontified t) 798 812 (face font-lock-variable-name-face fontified t) 812 815 (fontified t) 815 820 (face font-lock-function-call-face fontified t) 820 821 (fontified t) 821 826 (face font-lock-keyword-face fontified t) 826 831 (fontified t) 831 838 (face font-lock-type-face fontified t) 838 839 (fontified t) 839 846 (face font-lock-type-face fontified t) 846 850 (fontified t) 850 852 (face font-lock-keyword-face fontified t) 852 853 (fontified t) 853 859 (font-lock-multiline t fontified t) 859 862 (font-lock-multiline t face font-lock-keyword-face fontified t) 862 873 (font-lock-multiline t fontified t) 873 878 (font-lock-multiline t face font-lock-keyword-face fontified t) 878 879 (font-lock-multiline t fontified t) 879 886 (face font-lock-variable-name-face font-lock-multiline t fontified t) 886 888 (font-lock-multiline t fontified t) 888 895 (font-lock-multiline t face font-lock-type-face fontified t) 895 900 (font-lock-multiline t fontified t) 900 905 (font-lock-multiline t face font-lock-keyword-face fontified t) 905 909 (font-lock-multiline t fontified t) 909 915 (face font-lock-function-call-face font-lock-multiline t fontified t) 915 918 (font-lock-multiline t fontified t) 918 922 (font-lock-multiline t face font-lock-function-call-face fontified t) 922 949 (font-lock-multiline t fontified t) 949 955 (font-lock-multiline t face font-lock-keyword-face fontified t) 955 963 (font-lock-multiline t fontified t) 963 970 (font-lock-multiline t fontified t) 970 975 (font-lock-multiline t face font-lock-keyword-face fontified t) 975 994 (font-lock-multiline t fontified t) 994 1001 (face font-lock-type-face font-lock-multiline t fontified t) 1001 1002 (font-lock-multiline t fontified t) 1002 1007 (face font-lock-function-call-face font-lock-multiline t fontified t) 1007 1008 (font-lock-multiline t fontified t) 1008 1034 (font-lock-multiline t face font-lock-string-face fontified t) 1034 1051 (font-lock-multiline t fontified t) 1051 1056 (font-lock-multiline t face font-lock-keyword-face fontified t) 1056 1057 (font-lock-multiline t fontified t) 1057 1060 (font-lock-multiline t face font-lock-keyword-face fontified t) 1060 1061 (font-lock-multiline t fontified t) 1061 1066 (face font-lock-type-face font-lock-multiline t fontified t) 1066 1067 (font-lock-multiline t fontified t) 1067 1089 (font-lock-multiline t face font-lock-string-face fontified t) 1089 1098 (font-lock-multiline t fontified t) 1098 1100 (fontified t) 1100 1102 (fontified t) 1102 1108 (face font-lock-keyword-face fontified t) 1108 1109 (fontified t) 1109 1114 (face font-lock-keyword-face fontified t) 1114 1115 (fontified t) 1115 1123 (face font-lock-keyword-face fontified t) 1123 1124 (fontified t) 1124 1135 (face font-lock-function-name-face fontified t) 1135 1136 (fontified t) 1136 1143 (face font-lock-variable-name-face fontified t) 1143 1145 (fontified t) 1145 1151 (face typescript-primitive-face fontified t) 1151 1153 (fontified t) 1153 1154 (typescript--pstate ((nil 0 function 1116 ("orderStatus") nil) (((nil 0 function 601 ("authManage") nil)) -2305843009213693952 toplevel nil nil nil)) font-lock-multiline t fontified t) 1154 1159 (font-lock-multiline t fontified t) 1159 1164 (font-lock-multiline t face font-lock-keyword-face fontified t) 1164 1165 (font-lock-multiline t fontified t) 1165 1170 (face font-lock-variable-name-face font-lock-multiline t fontified t) 1170 1173 (font-lock-multiline t fontified t) 1173 1178 (font-lock-multiline t face font-lock-keyword-face fontified t) 1178 1182 (font-lock-multiline t fontified t) 1182 1188 (face font-lock-function-call-face font-lock-multiline t fontified t) 1188 1191 (font-lock-multiline t fontified t) 1191 1195 (font-lock-multiline t face font-lock-function-call-face fontified t) 1195 1196 (font-lock-multiline t fontified t) 1196 1202 (face font-lock-variable-name-face font-lock-multiline t fontified t) 1202 1204 (font-lock-multiline t fontified t) 1204 1209 (face font-lock-function-call-face font-lock-multiline t fontified t) 1209 1210 (font-lock-multiline t fontified t) 1210 1212 (face font-lock-function-call-face font-lock-multiline t fontified t) 1212 1220 (font-lock-multiline t fontified t) 1220 1222 (face font-lock-variable-name-face font-lock-multiline t fontified t) 1222 1224 (font-lock-multiline t fontified t) 1224 1231 (face font-lock-variable-name-face font-lock-multiline t fontified t) 1231 1235 (font-lock-multiline t fontified t) 1235 1240 (font-lock-multiline t face font-lock-keyword-face fontified t) 1240 1241 (font-lock-multiline t fontified t) 1241 1252 (face font-lock-variable-name-face font-lock-multiline t fontified t) 1252 1261 (font-lock-multiline t fontified t) 1261 1266 (face font-lock-function-call-face font-lock-multiline t fontified t) 1266 1275 (font-lock-multiline t fontified t) 1275 1281 (font-lock-multiline t face font-lock-keyword-face fontified t) 1281 1306 (font-lock-multiline t fontified t) 1306 1307 (typescript--pend (nil 0 function 1116 ("orderStatus") nil) font-lock-multiline t fontified t) 1307 1309 (fontified t) 1309 1315 (face font-lock-keyword-face fontified t) 1315 1316 (fontified t) 1316 1321 (face font-lock-keyword-face fontified t) 1321 1322 (fontified t) 1322 1330 (face font-lock-keyword-face fontified t) 1330 1331 (fontified t) 1331 1348 (face font-lock-function-name-face fontified t) 1348 1349 (fontified t) 1349 1356 (face font-lock-variable-name-face fontified t) 1356 1358 (fontified t) 1358 1364 (face typescript-primitive-face fontified t) 1364 1366 (fontified t) 1366 1367 (typescript--pstate ((nil 0 function 1323 ("updateOrderStatus") nil) (((nil 0 function 1116 ("orderStatus") nil) (nil 0 function 601 ("authManage") nil)) -2305843009213693952 toplevel nil nil nil)) font-lock-multiline t fontified t) 1367 1372 (font-lock-multiline t fontified t) 1372 1377 (font-lock-multiline t face font-lock-keyword-face fontified t) 1377 1378 (font-lock-multiline t fontified t) 1378 1383 (face font-lock-variable-name-face font-lock-multiline t fontified t) 1383 1386 (font-lock-multiline t fontified t) 1386 1391 (font-lock-multiline t face font-lock-keyword-face fontified t) 1391 1408 (font-lock-multiline t fontified t) 1408 1417 (face font-lock-function-call-face font-lock-multiline t fontified t) 1417 1428 (font-lock-multiline t fontified t) 1428 1430 (face font-lock-function-call-face font-lock-multiline t fontified t) 1430 1463 (font-lock-multiline t fontified t) 1463 1468 (font-lock-multiline t face font-lock-keyword-face fontified t) 1468 1469 (font-lock-multiline t fontified t) 1469 1480 (face font-lock-variable-name-face font-lock-multiline t fontified t) 1480 1489 (font-lock-multiline t fontified t) 1489 1494 (face font-lock-function-call-face font-lock-multiline t fontified t) 1494 1500 (font-lock-multiline t fontified t) 1500 1502 (font-lock-multiline t fontified t) 1502 1506 (font-lock-multiline t fontified t) 1506 1508 (font-lock-multiline t face font-lock-keyword-face fontified t) 1508 1537 (font-lock-multiline t fontified t) 1537 1567 (font-lock-multiline t face font-lock-string-face fontified t) 1567 1573 (font-lock-multiline t fontified t) 1573 1578 (font-lock-multiline t face font-lock-keyword-face fontified t) 1578 1582 (font-lock-multiline t fontified t) 1582 1588 (face font-lock-function-call-face font-lock-multiline t fontified t) 1588 1597 (font-lock-multiline t fontified t) 1597 1600 (font-lock-multiline t face font-lock-function-call-face fontified t) 1600 1602 (font-lock-multiline t fontified t) 1602 1613 (face font-lock-variable-name-face font-lock-multiline t fontified t) 1613 1615 (font-lock-multiline t fontified t) 1615 1646 (font-lock-multiline t face font-lock-string-face fontified t) 1646 1656 (font-lock-multiline t fontified t) 1656 1661 (face font-lock-function-call-face font-lock-multiline t fontified t) 1661 1662 (font-lock-multiline t fontified t) 1662 1664 (face font-lock-function-call-face font-lock-multiline t fontified t) 1664 1696 (font-lock-multiline t fontified t) 1696 1700 (font-lock-multiline t face font-lock-keyword-face fontified t) 1700 1704 (font-lock-multiline t fontified t) 1704 1709 (font-lock-multiline t face font-lock-keyword-face fontified t) 1709 1713 (font-lock-multiline t fontified t) 1713 1719 (face font-lock-function-call-face font-lock-multiline t fontified t) 1719 1728 (font-lock-multiline t fontified t) 1728 1731 (font-lock-multiline t face font-lock-function-call-face fontified t) 1731 1733 (font-lock-multiline t fontified t) 1733 1744 (face font-lock-variable-name-face font-lock-multiline t fontified t) 1744 1746 (font-lock-multiline t fontified t) 1746 1776 (font-lock-multiline t face font-lock-string-face fontified t) 1776 1786 (font-lock-multiline t fontified t) 1786 1791 (face font-lock-function-call-face font-lock-multiline t fontified t) 1791 1792 (font-lock-multiline t fontified t) 1792 1794 (face font-lock-function-call-face font-lock-multiline t fontified t) 1794 1822 (font-lock-multiline t fontified t) 1822 1823 (typescript--pend (nil 0 function 1323 ("updateOrderStatus") nil) font-lock-multiline t fontified t) 1823 1824 (fontified t) 1824 1825 (fontified t) 1825 1831 (face font-lock-keyword-face fontified t) 1831 1832 (fontified t) 1832 1837 (face font-lock-keyword-face fontified t) 1837 1838 (fontified t) 1838 1846 (face font-lock-keyword-face fontified t) 1846 1847 (fontified t) 1847 1854 (face font-lock-function-name-face fontified t) 1854 1855 (fontified t) 1855 1863 (face font-lock-variable-name-face fontified t) 1863 1865 (fontified t) 1865 1873 (face font-lock-type-face fontified t) 1873 1875 (fontified t) 1875 1876 (typescript--pstate ((nil 0 function 1839 ("setRole") nil) (((nil 0 function 1323 ("updateOrderStatus") nil) (nil 0 function 1116 ("orderStatus") nil) (nil 0 function 601 ("authManage") nil)) -2305843009213693952 toplevel nil nil nil)) font-lock-multiline t fontified t) 1876 1881 (font-lock-multiline t fontified t) 1881 1886 (font-lock-multiline t face font-lock-keyword-face fontified t) 1886 1887 (font-lock-multiline t fontified t) 1887 1893 (face font-lock-variable-name-face font-lock-multiline t fontified t) 1893 1896 (font-lock-multiline t fontified t) 1896 1901 (font-lock-multiline t face font-lock-keyword-face fontified t) 1901 1902 (font-lock-multiline t fontified t) 1902 1913 (face font-lock-function-call-face font-lock-multiline t fontified t) 1913 1920 (font-lock-multiline t fontified t) 1920 1922 (font-lock-multiline t face font-lock-keyword-face fontified t) 1922 1925 (font-lock-multiline t fontified t) 1925 1934 (face font-lock-function-call-face font-lock-multiline t fontified t) 1934 1935 (font-lock-multiline t fontified t) 1935 1942 (font-lock-multiline t face font-lock-string-face fontified t) 1942 1948 (font-lock-multiline t fontified t) 1948 1954 (font-lock-multiline t face font-lock-keyword-face fontified t) 1954 1966 (font-lock-multiline t fontified t) 1966 1982 (font-lock-multiline t face font-lock-string-face fontified t) 1982 1995 (font-lock-multiline t fontified t) 1995 1998 (font-lock-multiline t face font-lock-keyword-face fontified t) 1998 2005 (font-lock-multiline t fontified t) 2005 2010 (font-lock-multiline t face font-lock-keyword-face fontified t) 2010 2011 (font-lock-multiline t fontified t) 2011 2014 (face font-lock-variable-name-face font-lock-multiline t fontified t) 2014 2017 (font-lock-multiline t fontified t) 2017 2022 (font-lock-multiline t face font-lock-keyword-face fontified t) 2022 2036 (font-lock-multiline t fontified t) 2036 2046 (face font-lock-function-call-face font-lock-multiline t fontified t) 2046 2056 (font-lock-multiline t fontified t) 2056 2059 (font-lock-multiline t face font-lock-function-call-face fontified t) 2059 2060 (font-lock-multiline t fontified t) 2060 2064 (font-lock-multiline t face font-lock-string-face fontified t) 2064 2066 (font-lock-multiline t fontified t) 2066 2068 (font-lock-multiline t face font-lock-keyword-face fontified t) 2068 2069 (font-lock-multiline t fontified t) 2069 2075 (font-lock-multiline t face typescript-primitive-face fontified t) 2075 2118 (font-lock-multiline t fontified t) 2118 2121 (font-lock-multiline t face font-lock-function-call-face fontified t) 2121 2122 (font-lock-multiline t fontified t) 2122 2128 (font-lock-multiline t face font-lock-string-face fontified t) 2128 2144 (font-lock-multiline t fontified t) 2144 2150 (font-lock-multiline t face font-lock-keyword-face fontified t) 2150 2187 (font-lock-multiline t fontified t) 2187 2192 (font-lock-multiline t face font-lock-keyword-face fontified t) 2192 2205 (font-lock-multiline t fontified t) 2205 2211 (font-lock-multiline t face font-lock-keyword-face fontified t) 2211 2233 (font-lock-multiline t fontified t) 2233 2234 (typescript--pend (nil 0 function 1839 ("setRole") nil) font-lock-multiline t fontified t) 2234 2236 (fontified t) 2236 2242 (face font-lock-keyword-face fontified t) 2242 2243 (fontified t) 2243 2248 (face font-lock-keyword-face fontified t) 2248 2249 (fontified t) 2249 2257 (face font-lock-keyword-face fontified t) 2257 2258 (fontified t) 2258 2271 (face font-lock-function-name-face fontified t) 2271 2272 (fontified t) 2272 2280 (face font-lock-variable-name-face fontified t) 2280 2282 (fontified t) 2282 2290 (face font-lock-type-face fontified t) 2290 2292 (fontified t) 2292 2293 (typescript--pstate ((nil 0 function 2250 ("createProduct") nil) (((nil 0 function 1839 ("setRole") nil) (nil 0 function 1323 ("updateOrderStatus") nil) (nil 0 function 1116 ("orderStatus") nil) (nil 0 function 601 ("authManage") nil)) -2305843009213693952 toplevel nil nil nil)) font-lock-multiline t fontified t) 2293 2298 (font-lock-multiline t fontified t) 2298 2303 (font-lock-multiline t face font-lock-keyword-face fontified t) 2303 2304 (font-lock-multiline t fontified t) 2304 2308 (face font-lock-variable-name-face font-lock-multiline t fontified t) 2308 2318 (font-lock-multiline t fontified t) 2318 2323 (face font-lock-function-call-face font-lock-multiline t fontified t) 2323 2349 (font-lock-multiline t fontified t) 2349 2352 (font-lock-multiline t face font-lock-function-call-face fontified t) 2352 2353 (font-lock-multiline t fontified t) 2353 2359 (font-lock-multiline t face font-lock-string-face fontified t) 2359 2386 (font-lock-multiline t fontified t) 2386 2389 (font-lock-multiline t face font-lock-function-call-face fontified t) 2389 2390 (font-lock-multiline t fontified t) 2390 2397 (font-lock-multiline t face font-lock-string-face fontified t) 2397 2432 (font-lock-multiline t fontified t) 2432 2435 (font-lock-multiline t face font-lock-function-call-face fontified t) 2435 2436 (font-lock-multiline t fontified t) 2436 2451 (font-lock-multiline t face font-lock-string-face fontified t) 2451 2481 (font-lock-multiline t fontified t) 2481 2484 (font-lock-multiline t face font-lock-function-call-face fontified t) 2484 2485 (font-lock-multiline t fontified t) 2485 2495 (font-lock-multiline t face font-lock-string-face fontified t) 2495 2510 (font-lock-multiline t fontified t) 2510 2513 (font-lock-multiline t face font-lock-keyword-face fontified t) 2513 2524 (font-lock-multiline t fontified t) 2524 2529 (font-lock-multiline t face font-lock-keyword-face fontified t) 2529 2533 (font-lock-multiline t fontified t) 2533 2539 (face font-lock-function-call-face font-lock-multiline t fontified t) 2539 2558 (font-lock-multiline t fontified t) 2558 2564 (face font-lock-function-call-face font-lock-multiline t fontified t) 2564 2600 (font-lock-multiline t fontified t) 2600 2733 (font-lock-multiline t fontified t) 2733 2738 (font-lock-multiline t face font-lock-keyword-face fontified t) 2738 2755 (font-lock-multiline t fontified t) 2755 2761 (face font-lock-function-call-face font-lock-multiline t fontified t) 2761 2813 (font-lock-multiline t fontified t) 2813 2818 (font-lock-multiline t face font-lock-keyword-face fontified t) 2818 2833 (font-lock-multiline t fontified t) 2833 2839 (face font-lock-function-call-face font-lock-multiline t fontified t) 2839 2864 (font-lock-multiline t fontified t) 2864 2869 (font-lock-multiline t face font-lock-string-face fontified t) 2869 2896 (font-lock-multiline t fontified t) 2896 2900 (font-lock-multiline t face font-lock-type-face fontified t) 2900 2901 (font-lock-multiline t fontified t) 2901 2906 (face font-lock-function-call-face font-lock-multiline t fontified t) 2906 3002 (font-lock-multiline t fontified t) 3002 3022 (font-lock-multiline t fontified t) 3022 3029 (face font-lock-type-face font-lock-multiline t fontified t) 3029 3030 (font-lock-multiline t fontified t) 3030 3033 (face font-lock-function-call-face font-lock-multiline t fontified t) 3033 3034 (font-lock-multiline t fontified t) 3034 3065 (font-lock-multiline t face font-lock-string-face fontified t) 3065 3074 (font-lock-multiline t fontified t) 3074 3079 (font-lock-multiline t face font-lock-keyword-face fontified t) 3079 3098 (font-lock-multiline t fontified t) 3098 3105 (face font-lock-type-face font-lock-multiline t fontified t) 3105 3106 (font-lock-multiline t fontified t) 3106 3111 (face font-lock-function-call-face font-lock-multiline t fontified t) 3111 3112 (font-lock-multiline t fontified t) 3112 3137 (font-lock-multiline t face font-lock-string-face fontified t) 3137 3153 (font-lock-multiline t fontified t) 3153 3154 (typescript--pend (nil 0 function 2250 ("createProduct") nil) font-lock-multiline t fontified t) 3154 3155 (fontified t) 3155 3157 (fontified t) 3157 3162 (face font-lock-keyword-face fontified t) 3162 3163 (fontified t) 3163 3171 (face font-lock-variable-name-face fontified t) 3171 3174 (fontified t) 3174 3177 (face font-lock-keyword-face fontified t) 3177 3178 (fontified t) 3178 3186 (face font-lock-type-face fontified t) 3186 3187 (fontified t) 3187 3324 (font-lock-multiline t fontified t) 3324 3354 (fontified t font-lock-multiline t) 3354 3356 (fontified t) 3356 3357 (fontified t) 3357 3362 (face font-lock-keyword-face fontified t) 3362 3363 (fontified t) 3363 3379 (face font-lock-variable-name-face fontified t) 3379 3388 (fontified t) 3388 3400 (face font-lock-string-face fontified t) 3400 3406 (fontified t) 3406 3417 (face font-lock-string-face fontified t) 3417 3422 (fontified t) 3422 3427 (face font-lock-keyword-face fontified t) 3427 3428 (fontified t) 3428 3439 (face font-lock-variable-name-face fontified t) 3439 3455 (fontified t) 3455 3458 (face font-lock-comment-delimiter-face fontified t) 3458 3463 (face font-lock-comment-face fontified t) 3463 3464 (fontified t) 3464 3469 (face font-lock-keyword-face fontified t) 3469 3470 (fontified t) 3470 3486 (face font-lock-variable-name-face fontified t) 3486 3502 (fontified t) 3502 3504 (face font-lock-keyword-face fontified t) 3504 3512 (fontified t) 3512 3523 (face font-lock-function-call-face fontified t) 3523 3531 (fontified t) 3531 3539 (face font-lock-function-call-face fontified t) 3539 3540 (fontified t) 3540 3545 (face font-lock-string-face fontified t) 3545 3548 (fontified t) 3548 3552 (face font-lock-keyword-face fontified t) 3552 3553 (fontified t) 3553 3570 (face font-lock-type-face fontified t) 3570 3600 (fontified t) 3600 3609 (face font-lock-constant-face fontified t) 3609 3627 (fontified t) 3627 3633 (face typescript-primitive-face fontified t) 3633 3639 (fontified t) 3639 3645 (face typescript-primitive-face fontified t) 3645 3667 (fontified t) 3667 3673 (face typescript-primitive-face fontified t) 3673 3685 (fontified t) 3685 3694 (face font-lock-constant-face fontified t) 3694 3700 (fontified t) 3700 3704 (face font-lock-keyword-face fontified t) 3704 3705 (fontified t) 3705 3723 (face font-lock-type-face fontified t) 3723 3726 (fontified t) 3726 3742 (font-lock-multiline t fontified t) 3742 3748 (font-lock-multiline t face typescript-primitive-face fontified t) 3748 3763 (font-lock-multiline t fontified t) 3763 3769 (font-lock-multiline t face typescript-primitive-face fontified t) 3769 3784 (font-lock-multiline t fontified t) 3784 3790 (font-lock-multiline t face typescript-primitive-face fontified t) 3790 3801 (font-lock-multiline t fontified t) 3801 3807 (font-lock-multiline t face typescript-primitive-face fontified t) 3807 3812 (font-lock-multiline t fontified t) 3812 3816 (font-lock-multiline t face default fontified t) 3816 3818 (font-lock-multiline t fontified t) 3818 3824 (font-lock-multiline t face typescript-primitive-face fontified t) 3824 3841 (font-lock-multiline t fontified t) 3841 3847 (font-lock-multiline t face typescript-primitive-face fontified t) 3847 3850 (font-lock-multiline t fontified t) 3850 3854 (font-lock-multiline t face font-lock-constant-face fontified t) 3854 3856 (font-lock-multiline t fontified t) 3856 3857 (fontified t) 3857 3863 (face font-lock-keyword-face fontified t) 3863 3864 (fontified t) 3864 3869 (face font-lock-keyword-face fontified t) 3869 3870 (fontified t) 3870 3882 (face font-lock-variable-name-face fontified t) 3882 3885 (fontified t) 3885 3890 (face font-lock-keyword-face fontified t) 3890 3891 (fontified t) 3891 3892 (font-lock-multiline t fontified t) 3892 3896 (font-lock-multiline t fontified t) 3896 3904 (face font-lock-variable-name-face font-lock-multiline t fontified t) 3904 3908 (font-lock-multiline t fontified t) 3908 3916 (face font-lock-variable-name-face font-lock-multiline t fontified t) 3916 3920 (font-lock-multiline t fontified t) 3920 3928 (face font-lock-variable-name-face font-lock-multiline t fontified t) 3928 3932 (font-lock-multiline t fontified t) 3932 3936 (face font-lock-variable-name-face font-lock-multiline t fontified t) 3936 3940 (font-lock-multiline t fontified t) 3940 3944 (font-lock-multiline t face font-lock-variable-name-face fontified t) 3944 3948 (font-lock-multiline t fontified t) 3948 3953 (face font-lock-variable-name-face font-lock-multiline t fontified t) 3953 3957 (font-lock-multiline t fontified t) 3957 3963 (face font-lock-variable-name-face font-lock-multiline t fontified t) 3963 3967 (font-lock-multiline t fontified t) 3967 3976 (face font-lock-variable-name-face font-lock-multiline t fontified t) 3976 3979 (font-lock-multiline t fontified t) 3979 3981 (font-lock-multiline t fontified t) 3981 3999 (font-lock-multiline t face font-lock-type-face fontified t) 3999 4004 (font-lock-multiline t fontified t) 4004 4009 (face font-lock-variable-name-face font-lock-multiline t fontified t) 4009 4011 (font-lock-multiline t fontified t) 4011 4017 (font-lock-multiline t face typescript-primitive-face fontified t) 4017 4027 (font-lock-multiline t fontified t) 4027 4033 (font-lock-multiline t face typescript-primitive-face fontified t) 4033 4036 (font-lock-multiline t fontified t) 4036 4038 (fontified t) 4038 4055 (face font-lock-type-face fontified t) 4055 4056 (fontified t) 4056 4058 (face font-lock-keyword-face fontified t) 4058 4059 (fontified t) 4059 4063 (font-lock-multiline t fontified t) 4063 4065 (font-lock-multiline t face font-lock-keyword-face fontified t) 4065 4085 (font-lock-multiline t fontified t) 4085 4093 (face font-lock-function-call-face font-lock-multiline t fontified t) 4093 4111 (font-lock-multiline t fontified t) 4111 4117 (font-lock-multiline t face font-lock-keyword-face fontified t) 4117 4129 (font-lock-multiline t fontified t) 4129 4152 (font-lock-multiline t face font-lock-string-face fontified t) 4152 4163 (font-lock-multiline t fontified t) 4163 4165 (font-lock-multiline t face font-lock-keyword-face fontified t) 4165 4197 (font-lock-multiline t fontified t) 4197 4203 (font-lock-multiline t face font-lock-keyword-face fontified t) 4203 4215 (font-lock-multiline t fontified t) 4215 4236 (font-lock-multiline t face font-lock-string-face fontified t) 4236 4247 (font-lock-multiline t fontified t) 4247 4252 (font-lock-multiline t face font-lock-keyword-face fontified t) 4252 4253 (font-lock-multiline t fontified t) 4253 4261 (face font-lock-variable-name-face font-lock-multiline t fontified t) 4261 4264 (font-lock-multiline t fontified t) 4264 4280 (face font-lock-function-call-face font-lock-multiline t fontified t) 4280 4287 (font-lock-multiline t fontified t) 4287 4292 (font-lock-multiline t face font-lock-keyword-face fontified t) 4292 4293 (font-lock-multiline t fontified t) 4293 4309 (face font-lock-variable-name-face font-lock-multiline t fontified t) 4309 4312 (font-lock-multiline t fontified t) 4312 4315 (font-lock-multiline t face font-lock-keyword-face fontified t) 4315 4316 (font-lock-multiline t fontified t) 4316 4332 (face font-lock-type-face font-lock-multiline t fontified t) 4332 4493 (font-lock-multiline t fontified t) 4493 4498 (font-lock-multiline t face font-lock-keyword-face fontified t) 4498 4499 (font-lock-multiline t fontified t) 4499 4502 (face font-lock-variable-name-face font-lock-multiline t fontified t) 4502 4505 (font-lock-multiline t fontified t) 4505 4510 (font-lock-multiline t face font-lock-keyword-face fontified t) 4510 4511 (font-lock-multiline t fontified t) 4511 4523 (face font-lock-function-call-face font-lock-multiline t fontified t) 4523 4572 (font-lock-multiline t fontified t) 4572 4581 (font-lock-multiline t fontified t) 4581 4586 (font-lock-multiline t face font-lock-keyword-face fontified t) 4586 4587 (font-lock-multiline t fontified t) 4587 4594 (face font-lock-variable-name-face font-lock-multiline t fontified t) 4594 4597 (font-lock-multiline t fontified t) 4597 4602 (font-lock-multiline t face font-lock-keyword-face fontified t) 4602 4608 (font-lock-multiline t fontified t) 4608 4614 (face font-lock-function-call-face font-lock-multiline t fontified t) 4614 4623 (font-lock-multiline t fontified t) 4623 4629 (face font-lock-function-call-face font-lock-multiline t fontified t) 4629 4645 (font-lock-multiline t fontified t) 4645 4650 (face font-lock-function-call-face font-lock-multiline t fontified t) 4650 4651 (font-lock-multiline t fontified t) 4651 4654 (font-lock-multiline t face font-lock-string-face fontified t) 4654 4655 (font-lock-multiline t fontified t) 4655 4697 (font-lock-multiline t fontified t) 4697 4701 (font-lock-multiline t face font-lock-keyword-face fontified t) 4701 4731 (font-lock-multiline t fontified t) 4731 4735 (font-lock-multiline t face font-lock-constant-face fontified t) 4735 4741 (font-lock-multiline t fontified t) 4741 4750 (face font-lock-function-call-face font-lock-multiline t fontified t) 4750 4758 (font-lock-multiline t fontified t) 4758 4760 (font-lock-multiline t face font-lock-keyword-face fontified t) 4760 4778 (font-lock-multiline t fontified t) 4778 4784 (font-lock-multiline t face font-lock-keyword-face fontified t) 4784 4796 (font-lock-multiline t fontified t) 4796 4842 (font-lock-multiline t face font-lock-string-face fontified t) 4842 4856 (font-lock-multiline t fontified t) 4856 4859 (fontified t font-lock-multiline t) 4859 4865 (fontified t font-lock-multiline t face font-lock-keyword-face) 4865 4908 (fontified t font-lock-multiline t) 4908 4910 (fontified t)) . 1) (undo-tree-id23 . -4910) (undo-tree-id24 . -1102) (undo-tree-id25 . -1618) (undo-tree-id26 . -1155) (undo-tree-id27 . -1155) (undo-tree-id28 . -963) (undo-tree-id29 . -3548) (undo-tree-id30 . -3464) (undo-tree-id31 . -3548) (t 26736 11723 66464 343000)) ((1 . 4911)) (26736 12215 929377 0) 0 nil] [nil nil ((964 . 965) (t 26736 11723 66464 343000)) ((#(">" 0 1 (font-lock-multiline t fontified t)) . 964) (undo-tree-id6 . -1) (undo-tree-id7 . -1)) (26736 11857 508991 0) 0 nil])
([nil nil ((nil rear-nonsticky nil 8452 . 8453) (nil fontified nil 4912 . 8453) (4912 . 8453)) nil (26736 13426 506728 0) 0 nil])
([nil nil ((nil rear-nonsticky nil 7953 . 7954) (nil fontified nil 3701 . 7954) (3701 . 7954)) ((#("'use server';

import { redirect } from 'next/navigation';
import { revalidatePath } from 'next/cache';
import { getSignedURL } from '@/app/actions';
import { db } from '@/db/index';
import { productCatalouge, images } from '@/db/schema';
import { eq } from 'drizzle-orm';
import { stripe } from '@/lib/stripe';
import crypto from 'crypto';
import { format } from '@/app/zod';

const computeSHA256 = async (file: File) => {
    const buffer = await file.arrayBuffer();
    const hashBuffer = await crypto.subtle.digest('SHA-256', buffer);
    const hashArray = Array.from(new Uint8Array(hashBuffer));
    return hashArray.map((b) => b.toString(16).padStart(2, '0')).join('');
};

export async function createProductWithImage(formData: FormData) {
    try {
        // Extract form data
        const name = formData.get('name') as string;
        const price = parseFloat(formData.get('price') as string);
        const category = formData.get('category') as string;
        const imageName = formData.get('imageName') as string;
        const imageType = formData.get('imageType') as string;
        const imageWidth = parseInt(formData.get('imageWidth') as string) || 0;
        const imageHeight = parseInt(formData.get('imageHeight') as string) || 0;
        const imageFile = formData.get('image') as File;

        // Validate required fields
        if (!name || !price || !category || !imageName || !imageType || !imageFile) {
            throw new Error('Missing required fields');
        }

        // Step 1: Upload image using your existing getSignedURL function
        const checksum = await computeSHA256(imageFile);
        
        const signedURLResult = await getSignedURL({
            fileSize: imageFile.size,
            fileType: imageFile.type,
            checksum,
            name: imageName,
            type: imageType,
            width: imageWidth,
            height: imageHeight,
            productId: null, // Will be updated after product creation
        });

        if (signedURLResult.failure) {
            throw new Error(signedURLResult.failure);
        }

        const { url, id: imageId } = signedURLResult.success;
        
        // Upload file to S3
        const uploadResponse = await fetch(url, {
            method: 'PUT',
            headers: { 'Content-Type': imageFile.type },
            body: imageFile,
        });

        if (!uploadResponse.ok) {
            // Clean up the image record if upload fails
            await db.delete(images).where(eq(images.id, imageId));
            throw new Error('Failed to upload image to S3');
        }

        // Get the clean S3 URL (without query parameters)
        const imageUrl = url.split('?')[0];

        // Step 2: Create product using similar logic to your existing createProduct
        const productData = format.parse({
            name,
            price,
            imageLocation: imageUrl,
            category,
        });

        const productResults = await db.insert(productCatalouge).values({
            name: productData.name,
            price: productData.price,
            category: productData.category,
            imageLocation: productData.imageLocation,
        }).returning();

        const product = productResults[0];

        // Step 3: Update the image record with the product ID
        await db.update(images)
            .set({ productId: product.id })
            .where(eq(images.id, imageId));

        // Step 4: Create Stripe product and price (same as your createProduct)
        const stripeProduct = await stripe.products.create({
            name: productData.name,
        });

        await stripe.prices.create({
            currency: 'gbp', // Fixed your typo from 'gpp'
            unit_amount: Math.round(productData.price * 100),
            product: stripeProduct.id,
        });

        console.log('Product created successfully!', product);

        // Revalidate any relevant paths
        revalidatePath('/products');
        revalidatePath('/admin');

        // Redirect to success page or back to form
        redirect('/admin/products'); // Adjust this path as needed

    } catch (error) {
        console.error('Error creating product:', error);
        throw error;
    }
}" 0 12 (fontified nil face font-lock-string-face) 12 13 (fontified nil) 13 14 (fontified nil) 14 15 (fontified nil) 15 21 (fontified nil face font-lock-keyword-face) 21 35 (fontified nil) 35 39 (fontified nil face font-lock-keyword-face) 39 40 (fontified nil) 40 57 (fontified nil face font-lock-string-face) 57 59 (fontified nil) 59 65 (fontified nil face font-lock-keyword-face) 65 85 (fontified nil) 85 89 (fontified nil face font-lock-keyword-face) 89 90 (fontified nil) 90 102 (fontified nil face font-lock-string-face) 102 104 (fontified nil) 104 110 (fontified nil face font-lock-keyword-face) 110 128 (fontified nil) 128 132 (fontified nil face font-lock-keyword-face) 132 133 (fontified nil) 133 148 (fontified nil face font-lock-string-face) 148 150 (fontified nil) 150 156 (fontified nil face font-lock-keyword-face) 156 164 (fontified nil) 164 168 (fontified nil face font-lock-keyword-face) 168 169 (fontified nil) 169 181 (fontified nil face font-lock-string-face) 181 183 (fontified nil) 183 189 (fontified nil face font-lock-keyword-face) 189 219 (fontified nil) 219 223 (fontified nil face font-lock-keyword-face) 223 224 (fontified nil) 224 237 (fontified nil face font-lock-string-face) 237 239 (fontified nil) 239 245 (fontified nil face font-lock-keyword-face) 245 253 (fontified nil) 253 257 (fontified nil face font-lock-keyword-face) 257 258 (fontified nil) 258 271 (fontified nil face font-lock-string-face) 271 273 (fontified nil) 273 279 (fontified nil face font-lock-keyword-face) 279 291 (fontified nil) 291 295 (fontified nil face font-lock-keyword-face) 295 296 (fontified nil) 296 310 (fontified nil face font-lock-string-face) 310 312 (fontified nil) 312 318 (fontified nil face font-lock-keyword-face) 318 326 (fontified nil) 326 330 (fontified nil face font-lock-keyword-face) 330 331 (fontified nil) 331 339 (fontified nil face font-lock-string-face) 339 341 (fontified nil) 341 347 (fontified nil face font-lock-keyword-face) 347 359 (fontified nil) 359 363 (fontified nil face font-lock-keyword-face) 363 364 (fontified nil) 364 375 (fontified nil face font-lock-string-face) 375 378 (fontified nil) 378 383 (fontified nil face font-lock-keyword-face) 383 384 (fontified nil) 384 397 (fontified nil face font-lock-variable-name-face) 397 400 (fontified nil) 400 405 (fontified nil face font-lock-keyword-face) 405 407 (fontified nil) 407 411 (fontified nil face font-lock-variable-name-face) 411 413 (fontified nil) 413 417 (fontified nil face font-lock-type-face) 417 419 (fontified nil) 419 421 (fontified nil face font-lock-keyword-face) 421 422 (fontified nil) 422 428 (fontified nil font-lock-multiline t) 428 433 (fontified nil font-lock-multiline t face font-lock-keyword-face) 433 434 (fontified nil font-lock-multiline t) 434 440 (fontified nil face font-lock-variable-name-face font-lock-multiline t) 440 443 (fontified nil font-lock-multiline t) 443 448 (fontified nil font-lock-multiline t face font-lock-keyword-face) 448 454 (fontified nil font-lock-multiline t) 454 465 (fontified nil face font-lock-function-call-face font-lock-multiline t) 465 473 (fontified nil font-lock-multiline t) 473 478 (fontified nil font-lock-multiline t face font-lock-keyword-face) 478 479 (fontified nil font-lock-multiline t) 479 489 (fontified nil face font-lock-variable-name-face font-lock-multiline t) 489 492 (fontified nil font-lock-multiline t) 492 497 (fontified nil font-lock-multiline t face font-lock-keyword-face) 497 512 (fontified nil font-lock-multiline t) 512 518 (fontified nil face font-lock-function-call-face font-lock-multiline t) 518 519 (fontified nil font-lock-multiline t) 519 528 (fontified nil font-lock-multiline t face font-lock-string-face) 528 543 (fontified nil font-lock-multiline t) 543 548 (fontified nil font-lock-multiline t face font-lock-keyword-face) 548 549 (fontified nil font-lock-multiline t) 549 558 (fontified nil face font-lock-variable-name-face font-lock-multiline t) 558 567 (fontified nil font-lock-multiline t) 567 571 (fontified nil font-lock-multiline t face font-lock-function-call-face) 571 572 (fontified nil font-lock-multiline t) 572 575 (fontified nil font-lock-multiline t face font-lock-keyword-face) 575 576 (fontified nil font-lock-multiline t) 576 586 (fontified nil face font-lock-type-face font-lock-multiline t) 586 605 (fontified nil font-lock-multiline t) 605 611 (fontified nil font-lock-multiline t face font-lock-keyword-face) 611 622 (fontified nil font-lock-multiline t) 622 625 (fontified nil face font-lock-function-call-face font-lock-multiline t) 625 630 (fontified nil font-lock-multiline t) 630 632 (fontified nil face font-lock-keyword-face font-lock-multiline t) 632 635 (fontified nil font-lock-multiline t) 635 643 (fontified nil face font-lock-function-call-face font-lock-multiline t) 643 648 (fontified nil font-lock-multiline t) 648 656 (fontified nil face font-lock-function-call-face font-lock-multiline t) 656 660 (fontified nil font-lock-multiline t) 660 663 (fontified nil font-lock-multiline t face font-lock-string-face) 663 666 (fontified nil font-lock-multiline t) 666 670 (fontified nil face font-lock-function-call-face font-lock-multiline t) 670 671 (fontified nil font-lock-multiline t) 671 673 (fontified nil font-lock-multiline t face font-lock-string-face) 673 677 (fontified nil font-lock-multiline t) 677 680 (fontified nil) 680 686 (fontified nil face font-lock-keyword-face) 686 687 (fontified nil) 687 692 (fontified nil face font-lock-keyword-face) 692 693 (fontified nil) 693 701 (fontified nil face font-lock-keyword-face) 701 702 (fontified nil) 702 724 (fontified nil face font-lock-function-name-face) 724 725 (fontified nil) 725 733 (fontified nil face font-lock-variable-name-face) 733 735 (fontified nil) 735 743 (fontified nil face font-lock-type-face) 743 745 (fontified nil) 745 746 (fontified nil font-lock-multiline t) 746 751 (fontified nil font-lock-multiline t) 751 754 (fontified nil font-lock-multiline t face font-lock-keyword-face) 754 765 (fontified nil font-lock-multiline t) 765 768 (fontified nil font-lock-multiline t face font-lock-comment-delimiter-face) 768 786 (fontified nil font-lock-multiline t face font-lock-comment-face) 786 794 (fontified nil font-lock-multiline t) 794 799 (fontified nil font-lock-multiline t face font-lock-keyword-face) 799 800 (fontified nil font-lock-multiline t) 800 804 (fontified nil face font-lock-variable-name-face font-lock-multiline t) 804 816 (fontified nil font-lock-multiline t) 816 819 (fontified nil font-lock-multiline t face font-lock-function-call-face) 819 820 (fontified nil font-lock-multiline t) 820 826 (fontified nil font-lock-multiline t face font-lock-string-face) 826 828 (fontified nil font-lock-multiline t) 828 830 (fontified nil font-lock-multiline t face font-lock-keyword-face) 830 831 (fontified nil font-lock-multiline t) 831 837 (fontified nil font-lock-multiline t face typescript-primitive-face) 837 847 (fontified nil font-lock-multiline t) 847 852 (fontified nil font-lock-multiline t face font-lock-keyword-face) 852 853 (fontified nil font-lock-multiline t) 853 858 (fontified nil face font-lock-variable-name-face font-lock-multiline t) 858 861 (fontified nil font-lock-multiline t) 861 871 (fontified nil face font-lock-function-call-face font-lock-multiline t) 871 881 (fontified nil font-lock-multiline t) 881 884 (fontified nil font-lock-multiline t face font-lock-function-call-face) 884 885 (fontified nil font-lock-multiline t) 885 892 (fontified nil font-lock-multiline t face font-lock-string-face) 892 894 (fontified nil font-lock-multiline t) 894 896 (fontified nil font-lock-multiline t face font-lock-keyword-face) 896 897 (fontified nil font-lock-multiline t) 897 903 (fontified nil font-lock-multiline t face typescript-primitive-face) 903 914 (fontified nil font-lock-multiline t) 914 919 (fontified nil font-lock-multiline t face font-lock-keyword-face) 919 920 (fontified nil font-lock-multiline t) 920 928 (fontified nil face font-lock-variable-name-face font-lock-multiline t) 928 940 (fontified nil font-lock-multiline t) 940 943 (fontified nil font-lock-multiline t face font-lock-function-call-face) 943 944 (fontified nil font-lock-multiline t) 944 954 (fontified nil font-lock-multiline t face font-lock-string-face) 954 956 (fontified nil font-lock-multiline t) 956 958 (fontified nil font-lock-multiline t face font-lock-keyword-face) 958 959 (fontified nil font-lock-multiline t) 959 965 (fontified nil font-lock-multiline t face typescript-primitive-face) 965 975 (fontified nil font-lock-multiline t) 975 980 (fontified nil font-lock-multiline t face font-lock-keyword-face) 980 981 (fontified nil font-lock-multiline t) 981 990 (fontified nil face font-lock-variable-name-face font-lock-multiline t) 990 1002 (fontified nil font-lock-multiline t) 1002 1005 (fontified nil font-lock-multiline t face font-lock-function-call-face) 1005 1006 (fontified nil font-lock-multiline t) 1006 1017 (fontified nil font-lock-multiline t face font-lock-string-face) 1017 1019 (fontified nil font-lock-multiline t) 1019 1021 (fontified nil font-lock-multiline t face font-lock-keyword-face) 1021 1022 (fontified nil font-lock-multiline t) 1022 1028 (fontified nil font-lock-multiline t face typescript-primitive-face) 1028 1038 (fontified nil font-lock-multiline t) 1038 1043 (fontified nil font-lock-multiline t face font-lock-keyword-face) 1043 1044 (fontified nil font-lock-multiline t) 1044 1053 (fontified nil face font-lock-variable-name-face font-lock-multiline t) 1053 1065 (fontified nil font-lock-multiline t) 1065 1068 (fontified nil font-lock-multiline t face font-lock-function-call-face) 1068 1069 (fontified nil font-lock-multiline t) 1069 1080 (fontified nil font-lock-multiline t face font-lock-string-face) 1080 1082 (fontified nil font-lock-multiline t) 1082 1084 (fontified nil font-lock-multiline t face font-lock-keyword-face) 1084 1085 (fontified nil font-lock-multiline t) 1085 1091 (fontified nil font-lock-multiline t face typescript-primitive-face) 1091 1101 (fontified nil font-lock-multiline t) 1101 1106 (fontified nil font-lock-multiline t face font-lock-keyword-face) 1106 1107 (fontified nil font-lock-multiline t) 1107 1117 (fontified nil face font-lock-variable-name-face font-lock-multiline t) 1117 1120 (fontified nil font-lock-multiline t) 1120 1128 (fontified nil face font-lock-function-call-face font-lock-multiline t) 1128 1138 (fontified nil font-lock-multiline t) 1138 1141 (fontified nil font-lock-multiline t face font-lock-function-call-face) 1141 1142 (fontified nil font-lock-multiline t) 1142 1154 (fontified nil font-lock-multiline t face font-lock-string-face) 1154 1156 (fontified nil font-lock-multiline t) 1156 1158 (fontified nil font-lock-multiline t face font-lock-keyword-face) 1158 1159 (fontified nil font-lock-multiline t) 1159 1165 (fontified nil font-lock-multiline t face typescript-primitive-face) 1165 1181 (fontified nil font-lock-multiline t) 1181 1186 (fontified nil font-lock-multiline t face font-lock-keyword-face) 1186 1187 (fontified nil font-lock-multiline t) 1187 1198 (fontified nil face font-lock-variable-name-face font-lock-multiline t) 1198 1201 (fontified nil font-lock-multiline t) 1201 1209 (fontified nil face font-lock-function-call-face font-lock-multiline t) 1209 1219 (fontified nil font-lock-multiline t) 1219 1222 (fontified nil font-lock-multiline t face font-lock-function-call-face) 1222 1223 (fontified nil font-lock-multiline t) 1223 1236 (fontified nil font-lock-multiline t face font-lock-string-face) 1236 1238 (fontified nil font-lock-multiline t) 1238 1240 (fontified nil font-lock-multiline t face font-lock-keyword-face) 1240 1241 (fontified nil font-lock-multiline t) 1241 1247 (fontified nil font-lock-multiline t face typescript-primitive-face) 1247 1263 (fontified nil font-lock-multiline t) 1263 1268 (fontified nil font-lock-multiline t face font-lock-keyword-face) 1268 1269 (fontified nil font-lock-multiline t) 1269 1278 (fontified nil face font-lock-variable-name-face font-lock-multiline t) 1278 1290 (fontified nil font-lock-multiline t) 1290 1293 (fontified nil font-lock-multiline t face font-lock-function-call-face) 1293 1294 (fontified nil font-lock-multiline t) 1294 1301 (fontified nil font-lock-multiline t face font-lock-string-face) 1301 1303 (fontified nil font-lock-multiline t) 1303 1305 (fontified nil font-lock-multiline t face font-lock-keyword-face) 1305 1321 (fontified nil font-lock-multiline t) 1321 1324 (fontified nil font-lock-multiline t face font-lock-comment-delimiter-face) 1324 1349 (fontified nil font-lock-multiline t face font-lock-comment-face) 1349 1357 (fontified nil font-lock-multiline t) 1357 1359 (fontified nil font-lock-multiline t face font-lock-keyword-face) 1359 1447 (fontified nil font-lock-multiline t) 1447 1452 (fontified nil font-lock-multiline t face font-lock-keyword-face) 1452 1453 (fontified nil font-lock-multiline t) 1453 1456 (fontified nil font-lock-multiline t face font-lock-keyword-face) 1456 1457 (fontified nil font-lock-multiline t) 1457 1462 (fontified nil face font-lock-type-face font-lock-multiline t) 1462 1463 (fontified nil font-lock-multiline t) 1463 1488 (fontified nil font-lock-multiline t face font-lock-string-face) 1488 1500 (fontified nil font-lock-multiline t) 1500 1501 (fontified nil font-lock-multiline t) 1501 1510 (fontified nil font-lock-multiline t) 1510 1513 (fontified nil font-lock-multiline t face font-lock-comment-delimiter-face) 1513 1514 (fontified nil font-lock-multiline t face font-lock-comment-face) 1514 1576 (fontified nil font-lock-multiline t face font-lock-comment-face) 1576 1584 (fontified nil font-lock-multiline t) 1584 1589 (fontified nil font-lock-multiline t face font-lock-keyword-face) 1589 1590 (fontified nil font-lock-multiline t) 1590 1598 (fontified nil face font-lock-variable-name-face font-lock-multiline t) 1598 1601 (fontified nil font-lock-multiline t) 1601 1606 (fontified nil font-lock-multiline t face font-lock-keyword-face) 1606 1607 (fontified nil font-lock-multiline t) 1607 1620 (fontified nil face font-lock-function-call-face font-lock-multiline t) 1620 1650 (fontified nil font-lock-multiline t) 1650 1655 (fontified nil font-lock-multiline t face font-lock-keyword-face) 1655 1656 (fontified nil font-lock-multiline t) 1656 1671 (fontified nil face font-lock-variable-name-face font-lock-multiline t) 1671 1674 (fontified nil font-lock-multiline t) 1674 1679 (fontified nil font-lock-multiline t face font-lock-keyword-face) 1679 1680 (fontified nil font-lock-multiline t) 1680 1692 (fontified nil face font-lock-function-call-face font-lock-multiline t) 1692 1765 (fontified nil font-lock-multiline t) 1765 1769 (fontified nil font-lock-multiline t face font-lock-keyword-face) 1769 1834 (fontified nil font-lock-multiline t) 1834 1838 (fontified nil font-lock-multiline t face default) 1838 1938 (fontified nil font-lock-multiline t) 1938 1942 (fontified nil font-lock-multiline t face font-lock-constant-face) 1942 1944 (fontified nil font-lock-multiline t) 1944 1947 (fontified nil font-lock-multiline t face font-lock-comment-delimiter-face) 1947 1986 (fontified nil font-lock-multiline t face font-lock-comment-face) 1986 2007 (fontified nil font-lock-multiline t) 2007 2009 (fontified nil font-lock-multiline t face font-lock-keyword-face) 2009 2050 (fontified nil font-lock-multiline t) 2050 2055 (fontified nil font-lock-multiline t face font-lock-keyword-face) 2055 2056 (fontified nil font-lock-multiline t) 2056 2059 (fontified nil font-lock-multiline t face font-lock-keyword-face) 2059 2060 (fontified nil font-lock-multiline t) 2060 2065 (fontified nil face font-lock-type-face font-lock-multiline t) 2065 2111 (fontified nil font-lock-multiline t) 2111 2116 (fontified nil font-lock-multiline t face font-lock-keyword-face) 2116 2182 (fontified nil font-lock-multiline t) 2182 2185 (fontified nil font-lock-multiline t face font-lock-comment-delimiter-face) 2185 2203 (fontified nil font-lock-multiline t face font-lock-comment-face) 2203 2211 (fontified nil font-lock-multiline t) 2211 2216 (fontified nil font-lock-multiline t face font-lock-keyword-face) 2216 2217 (fontified nil font-lock-multiline t) 2217 2231 (fontified nil face font-lock-variable-name-face font-lock-multiline t) 2231 2234 (fontified nil font-lock-multiline t) 2234 2239 (fontified nil font-lock-multiline t face font-lock-keyword-face) 2239 2240 (fontified nil font-lock-multiline t) 2240 2245 (fontified nil face font-lock-function-call-face font-lock-multiline t) 2245 2273 (fontified nil font-lock-multiline t) 2273 2278 (fontified nil font-lock-multiline t face font-lock-string-face) 2278 2303 (fontified nil font-lock-multiline t) 2303 2317 (fontified nil font-lock-multiline t face font-lock-string-face) 2317 2329 (fontified nil font-lock-multiline t) 2329 2333 (fontified nil font-lock-multiline t face font-lock-keyword-face) 2333 2387 (fontified nil font-lock-multiline t) 2387 2389 (fontified nil font-lock-multiline t face font-lock-keyword-face) 2389 2425 (fontified nil font-lock-multiline t) 2425 2428 (fontified nil font-lock-multiline t face font-lock-comment-delimiter-face) 2428 2470 (fontified nil font-lock-multiline t face font-lock-comment-face) 2470 2482 (fontified nil font-lock-multiline t) 2482 2487 (fontified nil font-lock-multiline t face font-lock-keyword-face) 2487 2491 (fontified nil font-lock-multiline t) 2491 2497 (fontified nil font-lock-multiline t face font-lock-function-call-face) 2497 2506 (fontified nil font-lock-multiline t) 2506 2511 (fontified nil face font-lock-function-call-face font-lock-multiline t) 2511 2512 (fontified nil font-lock-multiline t) 2512 2514 (fontified nil face font-lock-function-call-face font-lock-multiline t) 2514 2522 (fontified nil font-lock-multiline t) 2522 2524 (fontified nil face font-lock-variable-name-face font-lock-multiline t) 2524 2526 (fontified nil font-lock-multiline t) 2526 2533 (fontified nil face font-lock-variable-name-face font-lock-multiline t) 2533 2549 (fontified nil font-lock-multiline t) 2549 2554 (fontified nil font-lock-multiline t face font-lock-keyword-face) 2554 2555 (fontified nil font-lock-multiline t) 2555 2558 (fontified nil font-lock-multiline t face font-lock-keyword-face) 2558 2559 (fontified nil font-lock-multiline t) 2559 2564 (fontified nil face font-lock-type-face font-lock-multiline t) 2564 2565 (fontified nil font-lock-multiline t) 2565 2595 (fontified nil font-lock-multiline t face font-lock-string-face) 2595 2617 (fontified nil font-lock-multiline t) 2617 2620 (fontified nil font-lock-multiline t face font-lock-comment-delimiter-face) 2620 2668 (fontified nil font-lock-multiline t face font-lock-comment-face) 2668 2676 (fontified nil font-lock-multiline t) 2676 2681 (fontified nil font-lock-multiline t face font-lock-keyword-face) 2681 2682 (fontified nil font-lock-multiline t) 2682 2690 (fontified nil face font-lock-variable-name-face font-lock-multiline t) 2690 2697 (fontified nil font-lock-multiline t) 2697 2702 (fontified nil face font-lock-function-call-face font-lock-multiline t) 2702 2703 (fontified nil font-lock-multiline t) 2703 2706 (fontified nil font-lock-multiline t face font-lock-string-face) 2706 2721 (fontified nil font-lock-multiline t) 2721 2724 (fontified nil font-lock-multiline t face font-lock-comment-delimiter-face) 2724 2798 (fontified nil font-lock-multiline t face font-lock-comment-face) 2798 2806 (fontified nil font-lock-multiline t) 2806 2811 (fontified nil font-lock-multiline t face font-lock-keyword-face) 2811 2812 (fontified nil font-lock-multiline t) 2812 2823 (fontified nil face font-lock-variable-name-face font-lock-multiline t) 2823 2833 (fontified nil font-lock-multiline t) 2833 2838 (fontified nil face font-lock-function-call-face font-lock-multiline t) 2838 2958 (fontified nil font-lock-multiline t) 2958 2963 (fontified nil font-lock-multiline t face font-lock-keyword-face) 2963 2964 (fontified nil font-lock-multiline t) 2964 2978 (fontified nil face font-lock-variable-name-face font-lock-multiline t) 2978 2981 (fontified nil font-lock-multiline t) 2981 2986 (fontified nil font-lock-multiline t face font-lock-keyword-face) 2986 2990 (fontified nil font-lock-multiline t) 2990 2996 (fontified nil face font-lock-function-call-face font-lock-multiline t) 2996 3001 (fontified nil font-lock-multiline t) 3001 3015 (fontified nil font-lock-multiline t) 3015 3021 (fontified nil face font-lock-function-call-face font-lock-multiline t) 3021 3207 (fontified nil font-lock-multiline t) 3207 3216 (fontified nil face font-lock-function-call-face font-lock-multiline t) 3216 3229 (fontified nil font-lock-multiline t) 3229 3234 (fontified nil font-lock-multiline t face font-lock-keyword-face) 3234 3235 (fontified nil font-lock-multiline t) 3235 3242 (fontified nil face font-lock-variable-name-face font-lock-multiline t) 3242 3273 (fontified nil font-lock-multiline t) 3273 3276 (fontified nil font-lock-multiline t face font-lock-comment-delimiter-face) 3276 3328 (fontified nil font-lock-multiline t face font-lock-comment-face) 3328 3336 (fontified nil font-lock-multiline t) 3336 3341 (fontified nil font-lock-multiline t face font-lock-keyword-face) 3341 3345 (fontified nil font-lock-multiline t) 3345 3351 (fontified nil face font-lock-function-call-face font-lock-multiline t) 3351 3373 (fontified nil font-lock-multiline t) 3373 3376 (fontified nil font-lock-multiline t face font-lock-function-call-face) 3376 3417 (fontified nil font-lock-multiline t) 3417 3422 (fontified nil face font-lock-function-call-face font-lock-multiline t) 3422 3423 (fontified nil font-lock-multiline t) 3423 3425 (fontified nil face font-lock-function-call-face font-lock-multiline t) 3425 3457 (fontified nil font-lock-multiline t) 3457 3460 (fontified nil font-lock-multiline t face font-lock-comment-delimiter-face) 3460 3529 (fontified nil font-lock-multiline t face font-lock-comment-face) 3529 3537 (fontified nil font-lock-multiline t) 3537 3542 (fontified nil font-lock-multiline t face font-lock-keyword-face) 3542 3543 (fontified nil font-lock-multiline t) 3543 3556 (fontified nil face font-lock-variable-name-face font-lock-multiline t) 3556 3559 (fontified nil font-lock-multiline t) 3559 3564 (fontified nil font-lock-multiline t face font-lock-keyword-face) 3564 3581 (fontified nil font-lock-multiline t) 3581 3587 (fontified nil face font-lock-function-call-face font-lock-multiline t) 3587 3647 (fontified nil font-lock-multiline t) 3647 3652 (fontified nil font-lock-multiline t face font-lock-keyword-face) 3652 3667 (fontified nil font-lock-multiline t) 3667 3673 (fontified nil face font-lock-function-call-face font-lock-multiline t) 3673 3698 (fontified nil font-lock-multiline t) 3698 3703 (fontified nil font-lock-multiline t face font-lock-string-face) 3703 3705 (fontified nil font-lock-multiline t) 3705 3708 (fontified nil font-lock-multiline t face font-lock-comment-delimiter-face) 3708 3735 (fontified nil font-lock-multiline t face font-lock-comment-face) 3735 3760 (fontified nil font-lock-multiline t) 3760 3764 (fontified nil font-lock-multiline t face font-lock-type-face) 3764 3765 (fontified nil font-lock-multiline t) 3765 3770 (fontified nil face font-lock-function-call-face font-lock-multiline t) 3770 3857 (fontified nil font-lock-multiline t) 3857 3864 (fontified nil face font-lock-type-face font-lock-multiline t) 3864 3865 (fontified nil font-lock-multiline t) 3865 3868 (fontified nil face font-lock-function-call-face font-lock-multiline t) 3868 3869 (fontified nil font-lock-multiline t) 3869 3900 (fontified nil font-lock-multiline t face font-lock-string-face) 3900 3921 (fontified nil font-lock-multiline t) 3921 3924 (fontified nil font-lock-multiline t face font-lock-comment-delimiter-face) 3924 3954 (fontified nil font-lock-multiline t face font-lock-comment-face) 3954 3962 (fontified nil font-lock-multiline t) 3962 3976 (fontified nil face font-lock-function-call-face font-lock-multiline t) 3976 3977 (fontified nil font-lock-multiline t) 3977 3988 (fontified nil font-lock-multiline t face font-lock-string-face) 3988 3999 (fontified nil font-lock-multiline t) 3999 4013 (fontified nil face font-lock-function-call-face font-lock-multiline t) 4013 4014 (fontified nil font-lock-multiline t) 4014 4022 (fontified nil font-lock-multiline t face font-lock-string-face) 4022 4034 (fontified nil font-lock-multiline t) 4034 4037 (fontified nil font-lock-multiline t face font-lock-comment-delimiter-face) 4037 4078 (fontified nil font-lock-multiline t face font-lock-comment-face) 4078 4086 (fontified nil font-lock-multiline t) 4086 4094 (fontified nil face font-lock-function-call-face font-lock-multiline t) 4094 4095 (fontified nil font-lock-multiline t) 4095 4112 (fontified nil font-lock-multiline t face font-lock-string-face) 4112 4115 (fontified nil font-lock-multiline t) 4115 4118 (fontified nil font-lock-multiline t face font-lock-comment-delimiter-face) 4118 4138 (fontified nil font-lock-multiline t face font-lock-comment-face) 4138 4144 (fontified nil font-lock-multiline t face font-lock-variable-name-face) 4144 4145 (fontified nil font-lock-multiline t face font-lock-comment-face) 4145 4152 (fontified nil font-lock-multiline t) 4152 4157 (fontified nil font-lock-multiline t face font-lock-keyword-face) 4157 4176 (fontified nil font-lock-multiline t) 4176 4183 (fontified nil face font-lock-type-face font-lock-multiline t) 4183 4184 (fontified nil font-lock-multiline t) 4184 4189 (fontified nil face font-lock-function-call-face font-lock-multiline t) 4189 4190 (fontified nil font-lock-multiline t) 4190 4215 (fontified nil font-lock-multiline t face font-lock-string-face) 4215 4233 (fontified nil font-lock-multiline t) 4233 4238 (fontified nil font-lock-multiline t face font-lock-keyword-face) 4238 4252 (fontified nil font-lock-multiline t) 4252 4253 (fontified nil font-lock-multiline t rear-nonsticky nil)) . 3701) (undo-tree-id99 . -13) (undo-tree-id100 . -13) (undo-tree-id101 . -13) (undo-tree-id102 . -237) (nil fontified nil 4378 . 4381) (nil fontified nil 4374 . 4378) (nil fontified nil 4372 . 4374) (nil fontified nil 4371 . 4372) (nil fontified nil 4367 . 4371) (nil fontified nil 4364 . 4367) (nil fontified nil 4361 . 4364) (nil fontified nil 4357 . 4361) (nil fontified nil 4349 . 4357) (nil fontified nil 4344 . 4349) (nil fontified nil 4336 . 4344) (nil fontified nil 4333 . 4336) (nil fontified nil 4331 . 4333) (nil fontified nil 4326 . 4331) (nil fontified nil 4323 . 4326) (nil fontified nil 4312 . 4323) (nil fontified nil 4306 . 4312) (nil fontified nil 4287 . 4306) (nil fontified nil 4277 . 4287) (nil fontified nil 4276 . 4277) (nil fontified nil 4273 . 4276) (nil fontified nil 4272 . 4273) (nil fontified nil 4268 . 4272) (nil fontified nil 4259 . 4268) (nil fontified nil 4250 . 4259) (nil fontified nil 4249 . 4250) (nil fontified nil 4244 . 4249) (nil fontified nil 4229 . 4244) (nil fontified nil 4220 . 4229) (nil fontified nil 4219 . 4220) (nil fontified nil 4213 . 4219) (nil fontified nil 4198 . 4213) (nil fontified nil 4193 . 4198) (nil fontified nil 4190 . 4193) (nil fontified nil 4180 . 4190) (nil fontified nil 4179 . 4180) (nil fontified nil 4174 . 4179) (nil fontified nil 4166 . 4174) (nil fontified nil 4155 . 4166) (nil fontified nil 4149 . 4155) (nil fontified nil 4144 . 4149) (nil fontified nil 4141 . 4144) (nil fontified nil 4135 . 4141) (nil fontified nil 4134 . 4135) (nil fontified nil 4129 . 4134) (nil fontified nil 4123 . 4129) (nil fontified nil 4122 . 4123) (nil fontified nil 4120 . 4122) (nil fontified nil 4118 . 4120) (nil fontified nil 4114 . 4118) (nil fontified nil 4112 . 4114) (nil fontified nil 4108 . 4112) (nil fontified nil 4106 . 4108) (nil fontified nil 4101 . 4106) (nil fontified nil 4098 . 4101) (nil fontified nil 4085 . 4098) (nil fontified nil 4084 . 4085) (nil fontified nil 4079 . 4084) (nil fontified nil 4076 . 4079) (nil fontified nil 4065 . 4076) (nil fontified nil 4064 . 4065) (nil fontified nil 4060 . 4064) (nil fontified nil 4048 . 4060) (nil fontified nil 4042 . 4048) (nil fontified nil 4040 . 4042) (nil fontified nil 4032 . 4040) (nil fontified nil 4031 . 4032) (nil fontified nil 4027 . 4031) (nil fontified nil 4019 . 4027) (nil fontified nil 4013 . 4019) (nil fontified nil 4011 . 4013) (nil fontified nil 3997 . 4011) (nil fontified nil 3996 . 3997) (nil fontified nil 3992 . 3996) (nil fontified nil 3980 . 3992) (nil fontified nil 3974 . 3980) (nil fontified nil 3972 . 3974) (nil fontified nil 3959 . 3972) (nil fontified nil 3958 . 3959) (nil fontified nil 3954 . 3958) (nil fontified nil 3946 . 3954) (nil fontified nil 3940 . 3946) (nil fontified nil 3938 . 3940) (nil fontified nil 3925 . 3938) (nil fontified nil 3924 . 3925) (nil fontified nil 3920 . 3924) (nil fontified nil 3890 . 3920) (nil fontified nil 3884 . 3890) (nil fontified nil 3882 . 3884) (nil fontified nil 3870 . 3882) (nil fontified nil 3869 . 3870) (nil fontified nil 3865 . 3869) (nil fontified nil 3857 . 3865) (nil fontified nil 3851 . 3857) (nil fontified nil 3849 . 3851) (nil fontified nil 3834 . 3849) (nil fontified nil 3833 . 3834) (nil fontified nil 3829 . 3833) (nil fontified nil 3811 . 3829) (nil fontified nil 3805 . 3811) (nil fontified nil 3803 . 3805) (nil fontified nil 3791 . 3803) (nil fontified nil 3790 . 3791) (nil fontified nil 3786 . 3790) (nil fontified nil 3766 . 3786) (nil fontified nil 3760 . 3766) (nil fontified nil 3758 . 3760) (nil fontified nil 3741 . 3758) (nil fontified nil 3740 . 3741) (nil fontified nil 3736 . 3740) (nil fontified nil 3722 . 3736) (nil fontified nil 3716 . 3722) (nil fontified nil 3715 . 3716) (nil fontified nil 3714 . 3715) (nil fontified nil 3713 . 3714) (nil fontified nil 3701 . 3713) (nil rear-nonsticky t 7953 . 7954)) (26736 12951 948838 0) 0 nil])
([nil nil ((nil rear-nonsticky nil 3919 . 3920) (nil fontified nil 1 . 13) (nil fontified nil 13 . 16) (nil fontified nil 16 . 22) (nil fontified nil 22 . 36) (nil fontified nil 36 . 40) (nil fontified nil 40 . 41) (nil fontified nil 41 . 58) (nil fontified nil 58 . 60) (nil fontified nil 60 . 66) (nil fontified nil 66 . 86) (nil fontified nil 86 . 90) (nil fontified nil 90 . 91) (nil fontified nil 91 . 103) (nil fontified nil 103 . 105) (nil fontified nil 105 . 111) (nil fontified nil 111 . 129) (nil fontified nil 129 . 133) (nil fontified nil 133 . 134) (nil fontified nil 134 . 149) (nil fontified nil 149 . 151) (nil fontified nil 151 . 157) (nil fontified nil 157 . 165) (nil fontified nil 165 . 169) (nil fontified nil 169 . 170) (nil fontified nil 170 . 182) (nil fontified nil 182 . 184) (nil fontified nil 184 . 190) (nil fontified nil 190 . 220) (nil fontified nil 220 . 224) (nil fontified nil 224 . 225) (nil fontified nil 225 . 238) (nil fontified nil 238 . 240) (nil fontified nil 240 . 246) (nil fontified nil 246 . 254) (nil fontified nil 254 . 258) (nil fontified nil 258 . 259) (nil fontified nil 259 . 272) (nil fontified nil 272 . 274) (nil fontified nil 274 . 280) (nil fontified nil 280 . 292) (nil fontified nil 292 . 296) (nil fontified nil 296 . 297) (nil fontified nil 297 . 311) (nil fontified nil 311 . 313) (nil fontified nil 313 . 319) (nil fontified nil 319 . 327) (nil fontified nil 327 . 331) (nil fontified nil 331 . 332) (nil fontified nil 332 . 340) (nil fontified nil 340 . 342) (nil fontified nil 342 . 348) (nil fontified nil 348 . 360) (nil fontified nil 360 . 364) (nil fontified nil 364 . 365) (nil fontified nil 365 . 376) (nil fontified nil 376 . 379) (nil fontified nil 379 . 384) (nil fontified nil 384 . 385) (nil fontified nil 385 . 398) (nil fontified nil 398 . 401) (nil fontified nil 401 . 406) (nil fontified nil 406 . 408) (nil fontified nil 408 . 412) (nil fontified nil 412 . 414) (nil fontified nil 414 . 418) (nil fontified nil 418 . 420) (nil fontified nil 420 . 422) (nil fontified nil 422 . 423) (nil fontified nil 423 . 429) (nil fontified nil 429 . 434) (nil fontified nil 434 . 435) (nil fontified nil 435 . 441) (nil fontified nil 441 . 444) (nil fontified nil 444 . 449) (nil fontified nil 449 . 455) (nil fontified nil 455 . 466) (nil fontified nil 466 . 474) (nil fontified nil 474 . 479) (nil fontified nil 479 . 480) (nil fontified nil 480 . 490) (nil fontified nil 490 . 493) (nil fontified nil 493 . 498) (nil fontified nil 498 . 513) (nil fontified nil 513 . 519) (nil fontified nil 519 . 520) (nil fontified nil 520 . 529) (nil fontified nil 529 . 544) (nil fontified nil 544 . 549) (nil fontified nil 549 . 550) (nil fontified nil 550 . 559) (nil fontified nil 559 . 568) (nil fontified nil 568 . 572) (nil fontified nil 572 . 573) (nil fontified nil 573 . 576) (nil fontified nil 576 . 577) (nil fontified nil 577 . 587) (nil fontified nil 587 . 606) (nil fontified nil 606 . 612) (nil fontified nil 612 . 623) (nil fontified nil 623 . 626) (nil fontified nil 626 . 631) (nil fontified nil 631 . 633) (nil fontified nil 633 . 636) (nil fontified nil 636 . 644) (nil fontified nil 644 . 649) (nil fontified nil 649 . 657) (nil fontified nil 657 . 661) (nil fontified nil 661 . 664) (nil fontified nil 664 . 667) (nil fontified nil 667 . 671) (nil fontified nil 671 . 672) (nil fontified nil 672 . 674) (nil fontified nil 674 . 678) (nil fontified nil 678 . 681) (1 . 3920)) ((#("'use server';

import { redirect } from 'next/navigation';
import { revalidatePath } from 'next/cache';
import { getSignedURL } from '@/app/actions';
import { db } from '@/db/index';
import { productCatalouge, images } from '@/db/schema';
import { eq } from 'drizzle-orm';
import { stripe } from '@/lib/stripe';
import crypto from 'crypto';
import { format } from '@/app/zod';

const computeSHA256 = async (file: File) => {
    const buffer = await file.arrayBuffer();
    const hashBuffer = await crypto.subtle.digest('SHA-256', buffer);
    const hashArray = Array.from(new Uint8Array(hashBuffer));
    return hashArray.map((b) => b.toString(16).padStart(2, '0')).join('');
};

export async function createProductWithImage(formData: FormData) {
    try {
        // Extract form data
        const name = formData.get('name') as string;
        const price = parseFloat(formData.get('price') as string);
        const category = formData.get('category') as string;
        const imageName = formData.get('imageName') as string;
        const imageType = formData.get('imageType') as string;
        const imageWidth = parseInt(formData.get('imageWidth') as string) || 0;
        const imageHeight = parseInt(formData.get('imageHeight') as string) || 0;
        const imageFile = formData.get('image') as File;

        // Validate required fields
        if (!name || !price || !category || !imageName || !imageType || !imageFile) {
            throw new Error('Missing required fields');
        }

        // Step 1: Upload image first to get the URL
        const checksum = await computeSHA256(imageFile);
        
        const signedURLResult = await getSignedURL({
            fileSize: imageFile.size,
            fileType: imageFile.type,
            checksum,
            name: imageName,
            type: imageType,
            width: imageWidth,
            height: imageHeight,
            productId: null, // Will be updated after product creation
        });

        if (signedURLResult.failure) {
            throw new Error(signedURLResult.failure);
        }

        const { url, id: imageId } = signedURLResult.success;
        
        // Upload file to S3
        const uploadResponse = await fetch(url, {
            method: 'PUT',
            headers: { 'Content-Type': imageFile.type },
            body: imageFile,
        });

        if (!uploadResponse.ok) {
            // Clean up the image record if upload fails
            await db.delete(images).where(eq(images.id, imageId));
            throw new Error('Failed to upload image to S3');
        }

        // Get the clean S3 URL (without query parameters)
        const imageUrl = url.split('?')[0];

        // Step 2: Create product with the image URL
        const productResults = await db.insert(productCatalouge).values({
            name,
            price,
            category,
            imageLocation: imageUrl,
        }).returning();

        const product = productResults[0];

        // Step 3: Update the image record with the product ID
        await db.update(images)
            .set({ productId: product.id })
            .where(eq(images.id, imageId));

        // Step 4: Create Stripe product and price
        const stripeProduct = await stripe.products.create({
            name: name,
        });

        await stripe.prices.create({
            currency: 'gbp', // Fixed your typo from 'gpp'
            unit_amount: Math.round(price * 100),
            product: stripeProduct.id,
        });

        console.log('Product created successfully!', product);

        // Revalidate any relevant paths
        revalidatePath('/products');
        revalidatePath('/admin');

        // Redirect to success page or back to form
        redirect('/admin/products'); // Adjust this path as needed

    } catch (error) {
        console.error('Error creating product:', error);
        throw error;
    }
}" 0 12 (face font-lock-string-face fontified nil) 12 14 (fontified nil) 14 15 (fontified nil) 15 21 (face font-lock-keyword-face fontified nil) 21 35 (fontified nil) 35 39 (face font-lock-keyword-face fontified nil) 39 40 (fontified nil) 40 57 (face font-lock-string-face fontified nil) 57 59 (fontified nil) 59 65 (face font-lock-keyword-face fontified nil) 65 85 (fontified nil) 85 89 (face font-lock-keyword-face fontified nil) 89 90 (fontified nil) 90 102 (face font-lock-string-face fontified nil) 102 104 (fontified nil) 104 110 (face font-lock-keyword-face fontified nil) 110 128 (fontified nil) 128 132 (face font-lock-keyword-face fontified nil) 132 133 (fontified nil) 133 148 (face font-lock-string-face fontified nil) 148 150 (fontified nil) 150 156 (face font-lock-keyword-face fontified nil) 156 164 (fontified nil) 164 168 (face font-lock-keyword-face fontified nil) 168 169 (fontified nil) 169 181 (face font-lock-string-face fontified nil) 181 183 (fontified nil) 183 189 (face font-lock-keyword-face fontified nil) 189 219 (fontified nil) 219 223 (face font-lock-keyword-face fontified nil) 223 224 (fontified nil) 224 237 (face font-lock-string-face fontified nil) 237 239 (fontified nil) 239 245 (face font-lock-keyword-face fontified nil) 245 253 (fontified nil) 253 257 (face font-lock-keyword-face fontified nil) 257 258 (fontified nil) 258 271 (face font-lock-string-face fontified nil) 271 273 (fontified nil) 273 279 (face font-lock-keyword-face fontified nil) 279 291 (fontified nil) 291 295 (face font-lock-keyword-face fontified nil) 295 296 (fontified nil) 296 310 (face font-lock-string-face fontified nil) 310 312 (fontified nil) 312 318 (face font-lock-keyword-face fontified nil) 318 326 (fontified nil) 326 330 (face font-lock-keyword-face fontified nil) 330 331 (fontified nil) 331 339 (face font-lock-string-face fontified nil) 339 341 (fontified nil) 341 347 (face font-lock-keyword-face fontified nil) 347 359 (fontified nil) 359 363 (face font-lock-keyword-face fontified nil) 363 364 (fontified nil) 364 375 (face font-lock-string-face fontified nil) 375 377 (fontified nil) 377 378 (fontified nil) 378 383 (face font-lock-keyword-face fontified nil) 383 384 (fontified nil) 384 397 (face font-lock-variable-name-face fontified nil) 397 400 (fontified nil) 400 405 (face font-lock-keyword-face fontified nil) 405 407 (fontified nil) 407 411 (face font-lock-variable-name-face fontified nil) 411 413 (fontified nil) 413 417 (face font-lock-type-face fontified nil) 417 419 (fontified nil) 419 421 (face font-lock-keyword-face fontified nil) 421 422 (fontified nil) 422 424 (font-lock-multiline t fontified nil) 424 428 (font-lock-multiline t fontified nil) 428 433 (font-lock-multiline t face font-lock-keyword-face fontified nil) 433 434 (font-lock-multiline t fontified nil) 434 440 (face font-lock-variable-name-face font-lock-multiline t fontified nil) 440 443 (font-lock-multiline t fontified nil) 443 448 (font-lock-multiline t face font-lock-keyword-face fontified nil) 448 454 (font-lock-multiline t fontified nil) 454 465 (face font-lock-function-call-face font-lock-multiline t fontified nil) 465 473 (font-lock-multiline t fontified nil) 473 478 (font-lock-multiline t face font-lock-keyword-face fontified nil) 478 479 (font-lock-multiline t fontified nil) 479 489 (face font-lock-variable-name-face font-lock-multiline t fontified nil) 489 492 (font-lock-multiline t fontified nil) 492 497 (font-lock-multiline t face font-lock-keyword-face fontified nil) 497 512 (font-lock-multiline t fontified nil) 512 518 (face font-lock-function-call-face font-lock-multiline t fontified nil) 518 519 (font-lock-multiline t fontified nil) 519 528 (font-lock-multiline t face font-lock-string-face fontified nil) 528 543 (font-lock-multiline t fontified nil) 543 548 (font-lock-multiline t face font-lock-keyword-face fontified nil) 548 549 (font-lock-multiline t fontified nil) 549 558 (face font-lock-variable-name-face font-lock-multiline t fontified nil) 558 567 (font-lock-multiline t fontified nil) 567 571 (font-lock-multiline t face font-lock-function-call-face fontified nil) 571 572 (font-lock-multiline t fontified nil) 572 575 (font-lock-multiline t face font-lock-keyword-face fontified nil) 575 576 (font-lock-multiline t fontified nil) 576 586 (face font-lock-type-face font-lock-multiline t fontified nil) 586 605 (font-lock-multiline t fontified nil) 605 611 (font-lock-multiline t face font-lock-keyword-face fontified nil) 611 622 (font-lock-multiline t fontified nil) 622 625 (face font-lock-function-call-face font-lock-multiline t fontified nil) 625 630 (font-lock-multiline t fontified nil) 630 632 (face font-lock-keyword-face font-lock-multiline t fontified nil) 632 635 (font-lock-multiline t fontified nil) 635 643 (face font-lock-function-call-face font-lock-multiline t fontified nil) 643 648 (font-lock-multiline t fontified nil) 648 656 (face font-lock-function-call-face font-lock-multiline t fontified nil) 656 660 (font-lock-multiline t fontified nil) 660 663 (font-lock-multiline t face font-lock-string-face fontified nil) 663 666 (font-lock-multiline t fontified nil) 666 670 (face font-lock-function-call-face font-lock-multiline t fontified nil) 670 671 (font-lock-multiline t fontified nil) 671 673 (font-lock-multiline t face font-lock-string-face fontified nil) 673 677 (font-lock-multiline t fontified nil) 677 679 (fontified nil) 679 680 (fontified nil) 680 686 (face font-lock-keyword-face fontified nil) 686 687 (fontified nil) 687 692 (face font-lock-keyword-face fontified nil) 692 693 (fontified nil) 693 701 (face font-lock-keyword-face fontified nil) 701 702 (fontified nil) 702 724 (face font-lock-function-name-face fontified nil) 724 725 (fontified nil) 725 733 (face font-lock-variable-name-face fontified nil) 733 735 (fontified nil) 735 743 (face font-lock-type-face fontified nil) 743 745 (fontified nil) 745 746 (typescript--pstate ((nil 0 function 694 ("createProductWithImage") 3920) (nil -2305843009213693952 toplevel nil nil nil)) font-lock-multiline t fontified nil) 746 751 (font-lock-multiline t fontified nil) 751 754 (font-lock-multiline t face font-lock-keyword-face fontified nil) 754 765 (font-lock-multiline t fontified nil) 765 768 (font-lock-multiline t face font-lock-comment-delimiter-face fontified nil) 768 786 (font-lock-multiline t face font-lock-comment-face fontified nil) 786 794 (font-lock-multiline t fontified nil) 794 799 (font-lock-multiline t face font-lock-keyword-face fontified nil) 799 800 (font-lock-multiline t fontified nil) 800 804 (face font-lock-variable-name-face font-lock-multiline t fontified nil) 804 816 (font-lock-multiline t fontified nil) 816 819 (font-lock-multiline t face font-lock-function-call-face fontified nil) 819 820 (font-lock-multiline t fontified nil) 820 826 (font-lock-multiline t face font-lock-string-face fontified nil) 826 828 (font-lock-multiline t fontified nil) 828 830 (font-lock-multiline t face font-lock-keyword-face fontified nil) 830 831 (font-lock-multiline t fontified nil) 831 837 (font-lock-multiline t face typescript-primitive-face fontified nil) 837 847 (font-lock-multiline t fontified nil) 847 852 (font-lock-multiline t face font-lock-keyword-face fontified nil) 852 853 (font-lock-multiline t fontified nil) 853 858 (face font-lock-variable-name-face font-lock-multiline t fontified nil) 858 861 (font-lock-multiline t fontified nil) 861 871 (face font-lock-function-call-face font-lock-multiline t fontified nil) 871 881 (font-lock-multiline t fontified nil) 881 884 (font-lock-multiline t face font-lock-function-call-face fontified nil) 884 885 (font-lock-multiline t fontified nil) 885 892 (font-lock-multiline t face font-lock-string-face fontified nil) 892 894 (font-lock-multiline t fontified nil) 894 896 (font-lock-multiline t face font-lock-keyword-face fontified nil) 896 897 (font-lock-multiline t fontified nil) 897 903 (font-lock-multiline t face typescript-primitive-face fontified nil) 903 914 (font-lock-multiline t fontified nil) 914 919 (font-lock-multiline t face font-lock-keyword-face fontified nil) 919 920 (font-lock-multiline t fontified nil) 920 928 (face font-lock-variable-name-face font-lock-multiline t fontified nil) 928 940 (font-lock-multiline t fontified nil) 940 943 (font-lock-multiline t face font-lock-function-call-face fontified nil) 943 944 (font-lock-multiline t fontified nil) 944 954 (font-lock-multiline t face font-lock-string-face fontified nil) 954 956 (font-lock-multiline t fontified nil) 956 958 (font-lock-multiline t face font-lock-keyword-face fontified nil) 958 959 (font-lock-multiline t fontified nil) 959 965 (font-lock-multiline t face typescript-primitive-face fontified nil) 965 975 (font-lock-multiline t fontified nil) 975 980 (font-lock-multiline t face font-lock-keyword-face fontified nil) 980 981 (font-lock-multiline t fontified nil) 981 990 (face font-lock-variable-name-face font-lock-multiline t fontified nil) 990 1002 (font-lock-multiline t fontified nil) 1002 1005 (font-lock-multiline t face font-lock-function-call-face fontified nil) 1005 1006 (font-lock-multiline t fontified nil) 1006 1017 (font-lock-multiline t face font-lock-string-face fontified nil) 1017 1019 (font-lock-multiline t fontified nil) 1019 1021 (font-lock-multiline t face font-lock-keyword-face fontified nil) 1021 1022 (font-lock-multiline t fontified nil) 1022 1028 (font-lock-multiline t face typescript-primitive-face fontified nil) 1028 1038 (font-lock-multiline t fontified nil) 1038 1043 (font-lock-multiline t face font-lock-keyword-face fontified nil) 1043 1044 (font-lock-multiline t fontified nil) 1044 1053 (face font-lock-variable-name-face font-lock-multiline t fontified nil) 1053 1065 (font-lock-multiline t fontified nil) 1065 1068 (font-lock-multiline t face font-lock-function-call-face fontified nil) 1068 1069 (font-lock-multiline t fontified nil) 1069 1080 (font-lock-multiline t face font-lock-string-face fontified nil) 1080 1082 (font-lock-multiline t fontified nil) 1082 1084 (font-lock-multiline t face font-lock-keyword-face fontified nil) 1084 1085 (font-lock-multiline t fontified nil) 1085 1091 (font-lock-multiline t face typescript-primitive-face fontified nil) 1091 1101 (font-lock-multiline t fontified nil) 1101 1106 (font-lock-multiline t face font-lock-keyword-face fontified nil) 1106 1107 (font-lock-multiline t fontified nil) 1107 1117 (face font-lock-variable-name-face font-lock-multiline t fontified nil) 1117 1120 (font-lock-multiline t fontified nil) 1120 1128 (face font-lock-function-call-face font-lock-multiline t fontified nil) 1128 1138 (font-lock-multiline t fontified nil) 1138 1141 (font-lock-multiline t face font-lock-function-call-face fontified nil) 1141 1142 (font-lock-multiline t fontified nil) 1142 1154 (font-lock-multiline t face font-lock-string-face fontified nil) 1154 1156 (font-lock-multiline t fontified nil) 1156 1158 (font-lock-multiline t face font-lock-keyword-face fontified nil) 1158 1159 (font-lock-multiline t fontified nil) 1159 1165 (font-lock-multiline t face typescript-primitive-face fontified nil) 1165 1181 (font-lock-multiline t fontified nil) 1181 1186 (font-lock-multiline t face font-lock-keyword-face fontified nil) 1186 1187 (font-lock-multiline t fontified nil) 1187 1198 (face font-lock-variable-name-face font-lock-multiline t fontified nil) 1198 1201 (font-lock-multiline t fontified nil) 1201 1209 (face font-lock-function-call-face font-lock-multiline t fontified nil) 1209 1219 (font-lock-multiline t fontified nil) 1219 1222 (font-lock-multiline t face font-lock-function-call-face fontified nil) 1222 1223 (font-lock-multiline t fontified nil) 1223 1236 (font-lock-multiline t face font-lock-string-face fontified nil) 1236 1238 (font-lock-multiline t fontified nil) 1238 1240 (font-lock-multiline t face font-lock-keyword-face fontified nil) 1240 1241 (font-lock-multiline t fontified nil) 1241 1247 (font-lock-multiline t face typescript-primitive-face fontified nil) 1247 1263 (font-lock-multiline t fontified nil) 1263 1268 (font-lock-multiline t face font-lock-keyword-face fontified nil) 1268 1269 (font-lock-multiline t fontified nil) 1269 1278 (face font-lock-variable-name-face font-lock-multiline t fontified nil) 1278 1290 (font-lock-multiline t fontified nil) 1290 1293 (font-lock-multiline t face font-lock-function-call-face fontified nil) 1293 1294 (font-lock-multiline t fontified nil) 1294 1301 (font-lock-multiline t face font-lock-string-face fontified nil) 1301 1303 (font-lock-multiline t fontified nil) 1303 1305 (font-lock-multiline t face font-lock-keyword-face fontified nil) 1305 1321 (font-lock-multiline t fontified nil) 1321 1324 (font-lock-multiline t face font-lock-comment-delimiter-face fontified nil) 1324 1349 (font-lock-multiline t face font-lock-comment-face fontified nil) 1349 1357 (font-lock-multiline t fontified nil) 1357 1359 (font-lock-multiline t face font-lock-keyword-face fontified nil) 1359 1447 (font-lock-multiline t fontified nil) 1447 1452 (font-lock-multiline t face font-lock-keyword-face fontified nil) 1452 1453 (font-lock-multiline t fontified nil) 1453 1456 (font-lock-multiline t face font-lock-keyword-face fontified nil) 1456 1457 (font-lock-multiline t fontified nil) 1457 1462 (face font-lock-type-face font-lock-multiline t fontified nil) 1462 1463 (font-lock-multiline t fontified nil) 1463 1488 (font-lock-multiline t face font-lock-string-face fontified nil) 1488 1500 (font-lock-multiline t fontified nil) 1500 1501 (font-lock-multiline t fontified nil) 1501 1510 (font-lock-multiline t fontified nil) 1510 1513 (font-lock-multiline t face font-lock-comment-delimiter-face fontified nil) 1513 1555 (font-lock-multiline t face font-lock-comment-face fontified nil) 1555 1563 (font-lock-multiline t fontified nil) 1563 1568 (font-lock-multiline t face font-lock-keyword-face fontified nil) 1568 1569 (font-lock-multiline t fontified nil) 1569 1577 (face font-lock-variable-name-face font-lock-multiline t fontified nil) 1577 1580 (font-lock-multiline t fontified nil) 1580 1585 (font-lock-multiline t face font-lock-keyword-face fontified nil) 1585 1586 (font-lock-multiline t fontified nil) 1586 1599 (face font-lock-function-call-face font-lock-multiline t fontified nil) 1599 1629 (font-lock-multiline t fontified nil) 1629 1634 (font-lock-multiline t face font-lock-keyword-face fontified nil) 1634 1635 (font-lock-multiline t fontified nil) 1635 1650 (face font-lock-variable-name-face font-lock-multiline t fontified nil) 1650 1653 (font-lock-multiline t fontified nil) 1653 1658 (font-lock-multiline t face font-lock-keyword-face fontified nil) 1658 1659 (font-lock-multiline t fontified nil) 1659 1671 (face font-lock-function-call-face font-lock-multiline t fontified nil) 1671 1744 (font-lock-multiline t fontified nil) 1744 1748 (font-lock-multiline t face font-lock-keyword-face fontified nil) 1748 1813 (font-lock-multiline t fontified nil) 1813 1817 (font-lock-multiline t face default fontified nil) 1817 1917 (font-lock-multiline t fontified nil) 1917 1921 (font-lock-multiline t face font-lock-constant-face fontified nil) 1921 1923 (font-lock-multiline t fontified nil) 1923 1926 (font-lock-multiline t face font-lock-comment-delimiter-face fontified nil) 1926 1965 (font-lock-multiline t face font-lock-comment-face fontified nil) 1965 1986 (font-lock-multiline t fontified nil) 1986 1988 (font-lock-multiline t face font-lock-keyword-face fontified nil) 1988 2029 (font-lock-multiline t fontified nil) 2029 2034 (font-lock-multiline t face font-lock-keyword-face fontified nil) 2034 2035 (font-lock-multiline t fontified nil) 2035 2038 (font-lock-multiline t face font-lock-keyword-face fontified nil) 2038 2039 (font-lock-multiline t fontified nil) 2039 2044 (face font-lock-type-face font-lock-multiline t fontified nil) 2044 2090 (font-lock-multiline t fontified nil) 2090 2095 (font-lock-multiline t face font-lock-keyword-face fontified nil) 2095 2161 (font-lock-multiline t fontified nil) 2161 2164 (font-lock-multiline t face font-lock-comment-delimiter-face fontified nil) 2164 2182 (font-lock-multiline t face font-lock-comment-face fontified nil) 2182 2190 (font-lock-multiline t fontified nil) 2190 2195 (font-lock-multiline t face font-lock-keyword-face fontified nil) 2195 2196 (font-lock-multiline t fontified nil) 2196 2210 (face font-lock-variable-name-face font-lock-multiline t fontified nil) 2210 2213 (font-lock-multiline t fontified nil) 2213 2218 (font-lock-multiline t face font-lock-keyword-face fontified nil) 2218 2219 (font-lock-multiline t fontified nil) 2219 2224 (face font-lock-function-call-face font-lock-multiline t fontified nil) 2224 2252 (font-lock-multiline t fontified nil) 2252 2257 (font-lock-multiline t face font-lock-string-face fontified nil) 2257 2282 (font-lock-multiline t fontified nil) 2282 2296 (font-lock-multiline t face font-lock-string-face fontified nil) 2296 2308 (font-lock-multiline t fontified nil) 2308 2312 (font-lock-multiline t face font-lock-keyword-face fontified nil) 2312 2366 (font-lock-multiline t fontified nil) 2366 2368 (font-lock-multiline t face font-lock-keyword-face fontified nil) 2368 2404 (font-lock-multiline t fontified nil) 2404 2407 (font-lock-multiline t face font-lock-comment-delimiter-face fontified nil) 2407 2449 (font-lock-multiline t face font-lock-comment-face fontified nil) 2449 2461 (font-lock-multiline t fontified nil) 2461 2466 (font-lock-multiline t face font-lock-keyword-face fontified nil) 2466 2470 (font-lock-multiline t fontified nil) 2470 2476 (font-lock-multiline t face font-lock-function-call-face fontified nil) 2476 2485 (font-lock-multiline t fontified nil) 2485 2490 (face font-lock-function-call-face font-lock-multiline t fontified nil) 2490 2491 (font-lock-multiline t fontified nil) 2491 2493 (face font-lock-function-call-face font-lock-multiline t fontified nil) 2493 2501 (font-lock-multiline t fontified nil) 2501 2503 (face font-lock-variable-name-face font-lock-multiline t fontified nil) 2503 2505 (font-lock-multiline t fontified nil) 2505 2512 (face font-lock-variable-name-face font-lock-multiline t fontified nil) 2512 2528 (font-lock-multiline t fontified nil) 2528 2533 (font-lock-multiline t face font-lock-keyword-face fontified nil) 2533 2534 (font-lock-multiline t fontified nil) 2534 2537 (font-lock-multiline t face font-lock-keyword-face fontified nil) 2537 2538 (font-lock-multiline t fontified nil) 2538 2543 (face font-lock-type-face font-lock-multiline t fontified nil) 2543 2544 (font-lock-multiline t fontified nil) 2544 2574 (font-lock-multiline t face font-lock-string-face fontified nil) 2574 2596 (font-lock-multiline t fontified nil) 2596 2599 (font-lock-multiline t face font-lock-comment-delimiter-face fontified nil) 2599 2647 (font-lock-multiline t face font-lock-comment-face fontified nil) 2647 2655 (font-lock-multiline t fontified nil) 2655 2660 (font-lock-multiline t face font-lock-keyword-face fontified nil) 2660 2661 (font-lock-multiline t fontified nil) 2661 2669 (face font-lock-variable-name-face font-lock-multiline t fontified nil) 2669 2676 (font-lock-multiline t fontified nil) 2676 2681 (face font-lock-function-call-face font-lock-multiline t fontified nil) 2681 2682 (font-lock-multiline t fontified nil) 2682 2685 (font-lock-multiline t face font-lock-string-face fontified nil) 2685 2700 (font-lock-multiline t fontified nil) 2700 2703 (font-lock-multiline t face font-lock-comment-delimiter-face fontified nil) 2703 2745 (font-lock-multiline t face font-lock-comment-face fontified nil) 2745 2753 (font-lock-multiline t fontified nil) 2753 2758 (font-lock-multiline t face font-lock-keyword-face fontified nil) 2758 2759 (font-lock-multiline t fontified nil) 2759 2773 (face font-lock-variable-name-face font-lock-multiline t fontified nil) 2773 2776 (font-lock-multiline t fontified nil) 2776 2781 (font-lock-multiline t face font-lock-keyword-face fontified nil) 2781 2785 (font-lock-multiline t fontified nil) 2785 2791 (face font-lock-function-call-face font-lock-multiline t fontified nil) 2791 2810 (font-lock-multiline t fontified nil) 2810 2816 (face font-lock-function-call-face font-lock-multiline t fontified nil) 2816 2926 (font-lock-multiline t fontified nil) 2926 2935 (face font-lock-function-call-face font-lock-multiline t fontified nil) 2935 2948 (font-lock-multiline t fontified nil) 2948 2953 (font-lock-multiline t face font-lock-keyword-face fontified nil) 2953 2954 (font-lock-multiline t fontified nil) 2954 2961 (face font-lock-variable-name-face font-lock-multiline t fontified nil) 2961 2992 (font-lock-multiline t fontified nil) 2992 2995 (font-lock-multiline t face font-lock-comment-delimiter-face fontified nil) 2995 3001 (font-lock-multiline t face font-lock-comment-face fontified nil) 3001 3047 (font-lock-multiline t face font-lock-comment-face fontified nil) 3047 3055 (font-lock-multiline t fontified nil) 3055 3060 (font-lock-multiline t face font-lock-keyword-face fontified nil) 3060 3064 (font-lock-multiline t fontified nil) 3064 3070 (face font-lock-function-call-face font-lock-multiline t fontified nil) 3070 3092 (font-lock-multiline t fontified nil) 3092 3095 (font-lock-multiline t face font-lock-function-call-face fontified nil) 3095 3136 (font-lock-multiline t fontified nil) 3136 3141 (face font-lock-function-call-face font-lock-multiline t fontified nil) 3141 3142 (font-lock-multiline t fontified nil) 3142 3144 (face font-lock-function-call-face font-lock-multiline t fontified nil) 3144 3176 (font-lock-multiline t fontified nil) 3176 3179 (font-lock-multiline t face font-lock-comment-delimiter-face fontified nil) 3179 3219 (font-lock-multiline t face font-lock-comment-face fontified nil) 3219 3227 (font-lock-multiline t fontified nil) 3227 3232 (font-lock-multiline t face font-lock-keyword-face fontified nil) 3232 3233 (font-lock-multiline t fontified nil) 3233 3246 (face font-lock-variable-name-face font-lock-multiline t fontified nil) 3246 3249 (font-lock-multiline t fontified nil) 3249 3254 (font-lock-multiline t face font-lock-keyword-face fontified nil) 3254 3271 (font-lock-multiline t fontified nil) 3271 3277 (face font-lock-function-call-face font-lock-multiline t fontified nil) 3277 3325 (font-lock-multiline t fontified nil) 3325 3330 (font-lock-multiline t face font-lock-keyword-face fontified nil) 3330 3345 (font-lock-multiline t fontified nil) 3345 3351 (face font-lock-function-call-face font-lock-multiline t fontified nil) 3351 3376 (font-lock-multiline t fontified nil) 3376 3381 (font-lock-multiline t face font-lock-string-face fontified nil) 3381 3383 (font-lock-multiline t fontified nil) 3383 3386 (font-lock-multiline t face font-lock-comment-delimiter-face fontified nil) 3386 3413 (font-lock-multiline t face font-lock-comment-face fontified nil) 3413 3438 (font-lock-multiline t fontified nil) 3438 3442 (font-lock-multiline t face font-lock-type-face fontified nil) 3442 3443 (font-lock-multiline t fontified nil) 3443 3448 (face font-lock-function-call-face font-lock-multiline t fontified nil) 3448 3523 (font-lock-multiline t fontified nil) 3523 3530 (face font-lock-type-face font-lock-multiline t fontified nil) 3530 3531 (font-lock-multiline t fontified nil) 3531 3534 (face font-lock-function-call-face font-lock-multiline t fontified nil) 3534 3535 (font-lock-multiline t fontified nil) 3535 3566 (font-lock-multiline t face font-lock-string-face fontified nil) 3566 3587 (font-lock-multiline t fontified nil) 3587 3590 (font-lock-multiline t face font-lock-comment-delimiter-face fontified nil) 3590 3620 (font-lock-multiline t face font-lock-comment-face fontified nil) 3620 3628 (font-lock-multiline t fontified nil) 3628 3642 (face font-lock-function-call-face font-lock-multiline t fontified nil) 3642 3643 (font-lock-multiline t fontified nil) 3643 3654 (font-lock-multiline t face font-lock-string-face fontified nil) 3654 3665 (font-lock-multiline t fontified nil) 3665 3679 (face font-lock-function-call-face font-lock-multiline t fontified nil) 3679 3680 (font-lock-multiline t fontified nil) 3680 3688 (font-lock-multiline t face font-lock-string-face fontified nil) 3688 3700 (font-lock-multiline t fontified nil) 3700 3703 (font-lock-multiline t face font-lock-comment-delimiter-face fontified nil) 3703 3744 (font-lock-multiline t face font-lock-comment-face fontified nil) 3744 3752 (font-lock-multiline t fontified nil) 3752 3760 (face font-lock-function-call-face font-lock-multiline t fontified nil) 3760 3761 (font-lock-multiline t fontified nil) 3761 3778 (font-lock-multiline t face font-lock-string-face fontified nil) 3778 3781 (font-lock-multiline t fontified nil) 3781 3784 (font-lock-multiline t face font-lock-comment-delimiter-face fontified nil) 3784 3804 (font-lock-multiline t face font-lock-comment-face fontified nil) 3804 3810 (font-lock-multiline t face font-lock-variable-name-face fontified nil) 3810 3811 (font-lock-multiline t face font-lock-comment-face fontified nil) 3811 3818 (font-lock-multiline t fontified nil) 3818 3823 (font-lock-multiline t face font-lock-keyword-face fontified nil) 3823 3842 (font-lock-multiline t fontified nil) 3842 3849 (face font-lock-type-face font-lock-multiline t fontified nil) 3849 3850 (font-lock-multiline t fontified nil) 3850 3855 (face font-lock-function-call-face font-lock-multiline t fontified nil) 3855 3856 (font-lock-multiline t fontified nil) 3856 3881 (font-lock-multiline t face font-lock-string-face fontified nil) 3881 3899 (font-lock-multiline t fontified nil) 3899 3904 (font-lock-multiline t face font-lock-keyword-face fontified nil) 3904 3918 (font-lock-multiline t fontified nil) 3918 3919 (typescript--pend (nil 0 function 694 ("createProductWithImage") 3920) font-lock-multiline t rear-nonsticky nil fontified nil)) . 1) (undo-tree-id32 . -679) (undo-tree-id33 . -340) (undo-tree-id34 . -3691) (undo-tree-id35 . -3691) (undo-tree-id36 . -3513) (undo-tree-id37 . -3513) (undo-tree-id38 . -3513) (undo-tree-id39 . -3513) (undo-tree-id40 . -3513) (undo-tree-id41 . -3513) (undo-tree-id42 . -3513) (undo-tree-id43 . -3513) (undo-tree-id44 . -3167) (undo-tree-id45 . -3167) (undo-tree-id46 . -3474) (undo-tree-id47 . -3513) (undo-tree-id48 . -3513) (undo-tree-id49 . -3513) (undo-tree-id50 . -3513) (undo-tree-id51 . -3463) (undo-tree-id52 . -3474) (nil fontified t 680 . 681) (nil fontified t 425 . 429) (nil fontified t 378 . 379) (nil fontified t 342 . 348) (nil fontified t 313 . 319) (nil fontified t 274 . 280) (nil fontified t 240 . 246) (nil fontified t 184 . 190) (nil fontified t 151 . 157) (nil fontified t 105 . 111) (nil fontified t 60 . 66) (nil fontified t 15 . 16) (nil fontified t 1 . 13) (nil rear-nonsticky t 3919 . 3920)) (26736 12124 444228 0) 0 nil])
nil
([nil nil ((587 . 589)) nil (26736 13426 506727 0) 0 nil])
([nil nil ((#("type SignedURLResponse = Promise<
    | { failure?: undefined; success: { url: string; id: number } }
    | { failure: string; success?: undefined }
>
" 0 4 (face font-lock-keyword-face fontified t) 4 5 (fontified t) 5 22 (face font-lock-type-face fontified t) 22 52 (fontified t) 52 61 (face font-lock-constant-face fontified t) 61 79 (fontified t) 79 85 (face typescript-primitive-face fontified t) 85 91 (fontified t) 91 97 (face typescript-primitive-face fontified t) 97 119 (fontified t) 119 125 (face typescript-primitive-face fontified t) 125 137 (fontified t) 137 146 (face font-lock-constant-face fontified t) 146 151 (fontified t)) . 3549) (undo-tree-id87 . -151)) ((3549 . 3700)) (26736 12950 890312 0) 0 nil])
nil
([nil nil ((nil rear-nonsticky nil 674 . 675) (nil fontified nil 587 . 675) (587 . 675)) nil (26736 13426 506726 0) 0 nil])
([nil nil ((#("
" 0 1 (fontified t)) . -3548) (undo-tree-id85 . -1) (undo-tree-id86 . -1) 3549) ((3548 . 3549)) (26736 12950 600957 0) 0 nil])
([nil nil ((#("
" 0 1 (fontified t)) . -675) (undo-tree-id110 . -1) (undo-tree-id111 . -1) (undo-tree-id112 . -1) 676) nil (26736 13426 506724 0) 0 nil])
([nil nil ((#("'use server';" 0 12 (face font-lock-string-face fontified t) 12 13 (fontified t)) . 3549) (undo-tree-id82 . -13) (undo-tree-id83 . -13) (undo-tree-id84 . -13)) ((3549 . 3562)) (26736 12947 217336 0) 0 nil])
([nil nil ((675 . 682)) nil (26736 13426 506721 0) 0 nil])
([nil nil ((#("
" 0 1 (fontified t)) . -3547) (undo-tree-id53 . -1) (undo-tree-id54 . -1) (undo-tree-id55 . -1) (undo-tree-id56 . -1) (undo-tree-id57 . -1) (undo-tree-id58 . -1) (undo-tree-id59 . -1) (undo-tree-id60 . -1) (undo-tree-id61 . -1) (undo-tree-id62 . -1) (undo-tree-id63 . -1) (undo-tree-id64 . -1) (undo-tree-id65 . -1) (undo-tree-id66 . -1) (undo-tree-id67 . -1) (#("
" 0 1 (fontified t)) . -3548) (undo-tree-id68 . -1) (undo-tree-id69 . -1) (undo-tree-id70 . -1) (undo-tree-id71 . -1) (undo-tree-id72 . -1) (undo-tree-id73 . -1) (undo-tree-id74 . -1) (undo-tree-id75 . -1) (undo-tree-id76 . -1) (undo-tree-id77 . -1) (undo-tree-id78 . -1) (undo-tree-id79 . -1) (undo-tree-id80 . -1) (undo-tree-id81 . -1) 3549) ((3547 . 3549)) (26736 12946 528237 0) 0 nil])
([nil nil ((#("e" 0 1 (fontified t)) . -675) (undo-tree-id103 . -1) (#("e" 0 1 (fontified t)) . -676) (undo-tree-id104 . -1) (#("e" 0 1 (fontified t)) . -677) (undo-tree-id105 . -1) (#("e" 0 1 (fontified t)) . -678) (undo-tree-id106 . -1) (#("e" 0 1 (fontified t)) . -679) (undo-tree-id107 . -1) (#("e" 0 1 (fontified t)) . -680) (undo-tree-id108 . -1) (#("e" 0 1 (fontified t)) . -681) (undo-tree-id109 . -1) 682) nil (26736 13432 649807 0) 0 nil])
nil
([nil nil ((8542 . 8543)) ((#("
" 0 1 (fontified t)) . 8542) (t 26736 13426 513207 1000)) (26736 13433 212492 0) 0 nil])
([nil nil ((#("import { redirect } from 'next/navigation';
" 0 6 (face font-lock-keyword-face fontified t) 6 20 (fontified t) 20 24 (face font-lock-keyword-face fontified t) 24 25 (fontified t) 25 42 (face font-lock-string-face fontified t) 42 44 (fontified t)) . 587) (undo-tree-id137 . -44) (t 26736 13426 513207 1000)) nil (26736 13531 745610 0) 0 nil])
([nil nil ((#("        // Redirect to success page or back to form
        redirect('/admin/products'); // Adjust this path as needed" 0 8 (fontified t font-lock-multiline t) 8 11 (fontified t font-lock-multiline t face font-lock-comment-delimiter-face) 11 52 (fontified t font-lock-multiline t face font-lock-comment-face) 52 60 (fontified t font-lock-multiline t) 60 68 (fontified t face font-lock-function-call-face font-lock-multiline t) 68 69 (fontified t font-lock-multiline t) 69 86 (fontified t font-lock-multiline t face font-lock-string-face) 86 89 (fontified t font-lock-multiline t) 89 92 (fontified t font-lock-multiline t face font-lock-comment-delimiter-face) 92 112 (fontified t font-lock-multiline t face font-lock-comment-face) 112 118 (fontified t font-lock-multiline t face font-lock-variable-name-face)) . 8271) (undo-tree-id136 . -118)) nil (26736 13531 745609 0) 0 nil])
([nil nil ((#("
" 0 1 (font-lock-multiline t fontified t)) . -8269) (undo-tree-id132 . -1) (undo-tree-id133 . -1) (#("
" 0 1 (font-lock-multiline t fontified t)) . -8270) (undo-tree-id134 . -1) (undo-tree-id135 . -1) 8271) nil (26736 13531 745607 0) 0 nil])
([nil nil ((#("       revalidatePath('/admin');" 0 7 (font-lock-multiline t fontified t) 7 21 (face font-lock-function-call-face font-lock-multiline t fontified t) 21 22 (font-lock-multiline t fontified t) 22 30 (font-lock-multiline t face font-lock-string-face fontified t) 30 32 (font-lock-multiline t fontified t)) . 8237) (undo-tree-id129 . -32) (undo-tree-id130 . -32) (undo-tree-id131 . -32)) nil (26736 13531 745596 0) 0 nil])
([nil nil ((#("
" 0 1 (font-lock-multiline t fontified t)) . -8235) (undo-tree-id121 . -1) (undo-tree-id122 . -1) (undo-tree-id123 . -1) (undo-tree-id124 . -1) (#(" " 0 1 (font-lock-multiline t fontified t)) . -8236) (undo-tree-id125 . -1) (undo-tree-id126 . -1) (undo-tree-id127 . -1) (undo-tree-id128 . -1) 8237) nil (26736 13531 745593 0) 0 nil])
([nil nil ((#("p" 0 1 (font-lock-multiline t face font-lock-string-face fontified t)) . -8224) (undo-tree-id113 . -1) (#("r" 0 1 (font-lock-multiline t face font-lock-string-face fontified t)) . -8225) (undo-tree-id114 . -1) (#("o" 0 1 (font-lock-multiline t face font-lock-string-face fontified t)) . -8226) (undo-tree-id115 . -1) (#("d" 0 1 (font-lock-multiline t face font-lock-string-face fontified t)) . -8227) (undo-tree-id116 . -1) (#("u" 0 1 (font-lock-multiline t face font-lock-string-face fontified t)) . -8228) (undo-tree-id117 . -1) (#("c" 0 1 (font-lock-multiline t face font-lock-string-face fontified t)) . -8229) (undo-tree-id118 . -1) (#("t" 0 1 (font-lock-multiline t face font-lock-string-face fontified t)) . -8230) (undo-tree-id119 . -1) (#("s" 0 1 (font-lock-multiline t face font-lock-string-face fontified t)) . -8231) (undo-tree-id120 . -1) 8232) nil (26736 13531 745585 0) 0 nil])
([nil nil ((8224 . 8231)) nil (26736 13531 745570 0) 0 nil])
([nil nil ((8231 . 8233)) nil (26736 13531 745566 0) 0 nil])
([nil current ((#("i" 0 1 (font-lock-multiline t fontified t)) . -3291) (undo-tree-id138 . -1) (undo-tree-id139 . -1) (undo-tree-id140 . -1) (undo-tree-id141 . -1) (undo-tree-id142 . -1) (undo-tree-id143 . -1) (undo-tree-id144 . -1) 3292 (t 26736 13531 751015 402000)) nil (26736 14021 714602 0) 0 nil])
nil
